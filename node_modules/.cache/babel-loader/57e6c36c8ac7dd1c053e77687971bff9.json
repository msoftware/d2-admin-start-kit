{"remainingRequest":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\plugin\\error\\index.js","dependencies":[{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\plugin\\error\\index.js","mtime":1593435051092},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592891886067},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js","mtime":1592891886030},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js","mtime":1592891895300}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IHsgZ2V0LCBpc09iamVjdCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHV0aWwgZnJvbSAnQC9saWJzL3V0aWwnOwpleHBvcnQgZGVmYXVsdCB7CiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUsIG9wdGlvbnMpIHsKICAgIGZ1bmN0aW9uIHdyaXRlTG9nKGxvZ1R5cGUpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgdm0pIHsKICAgICAgICB2YXIgaW5mbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7CiAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdkMmFkbWluL2xvZy9wdXNoJywgewogICAgICAgICAgICBtZXNzYWdlOiAiIi5jb25jYXQoaW5mbywgIjogIikuY29uY2F0KGlzT2JqZWN0KGVycm9yKSA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvciksCiAgICAgICAgICAgIHR5cGU6IGxvZ1R5cGUsCiAgICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsCiAgICAgICAgICAgICAgdm06IHZtCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAnZGV2ZWxvcG1lbnQnKSByZXR1cm47CiAgICAgICAgICB1dGlsLmxvZy5jYXBzdWxlKCdEMkFkbWluJywgJ0Vycm9ySGFuZGxlcicsIGxvZ1R5cGUpOwogICAgICAgICAgdXRpbC5sb2cuZGFuZ2VyKCc+Pj4+Pj4g6ZSZ6K+v5L+h5oGvID4+Pj4+PicpOwogICAgICAgICAgY29uc29sZS5sb2coaW5mbyk7CiAgICAgICAgICB1dGlsLmxvZy5kYW5nZXIoJz4+Pj4+PiBWdWUg5a6e5L6LID4+Pj4+PicpOwogICAgICAgICAgY29uc29sZS5sb2codm0pOwogICAgICAgICAgdXRpbC5sb2cuZGFuZ2VyKCc+Pj4+Pj4gRXJyb3IgPj4+Pj4+Jyk7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CgogICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7CiAgICAgIFZ1ZS5jb25maWcud2FybkhhbmRsZXIgPSB3cml0ZUxvZygnd2FybmluZycpOwogICAgfQoKICAgIFZ1ZS5jb25maWcuZXJyb3JIYW5kbGVyID0gd3JpdGVMb2coJ2RhbmdlcicpOwoKICAgIHdpbmRvdy5vbnVuaGFuZGxlZHJlamVjdGlvbiA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICBzdG9yZS5kaXNwYXRjaCgnZDJhZG1pbi9sb2cvcHVzaCcsIHsKICAgICAgICBtZXNzYWdlOiBnZXQoZXJyb3IsICdyZWFzb24ubWVzc2FnZScsICdVbmtub3duIGVycm9yJyksCiAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgbWV0YTogewogICAgICAgICAgZXJyb3I6IGdldChlcnJvciwgJ3JlYXNvbicpLAogICAgICAgICAgdHJhY2U6IGdldChlcnJvciwgJ3JlYXNvbi5zdGFjaycpCiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgd2luZG93Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQsIHNvdXJjZSwgbGluZW5vLCBjb2xubywgZXJyb3IpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2QyYWRtaW4vbG9nL3B1c2gnLCB7CiAgICAgICAgbWVzc2FnZTogZ2V0KGVycm9yLCAnbWVzc2FnZScsICdVbmtub3duIGVycm9yJyksCiAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgbWV0YTogewogICAgICAgICAgZXJyb3I6IGVycm9yLAogICAgICAgICAgdHJhY2U6IGdldChlcnJvciwgJ3N0YWNrJyksCiAgICAgICAgICBzb3VyY2U6ICIiLmNvbmNhdChzb3VyY2UsICJAIikuY29uY2F0KGxpbmVubywgIjoiKS5jb25jYXQoY29sbm8pLAogICAgICAgICAgZXZlbnQ6IGV2ZW50CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:/Projekte/vue-admin/d2-admin-start-kit/src/plugin/error/index.js"],"names":["get","isObject","store","util","install","Vue","options","writeLog","logType","error","vm","info","nextTick","dispatch","message","type","meta","process","env","NODE_ENV","log","capsule","danger","console","config","warnHandler","errorHandler","window","onunhandledrejection","trace","onerror","event","source","lineno","colno"],"mappings":"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","sourcesContent":["import { get, isObject } from 'lodash'\r\nimport store from '@/store'\r\nimport util from '@/libs/util'\r\n\r\nexport default {\r\n  install (Vue, options) {\r\n    function writeLog (logType) {\r\n      return (error, vm, info = '') => {\r\n        Vue.nextTick(() => {\r\n          store.dispatch('d2admin/log/push', {\r\n            message: `${info}: ${isObject(error) ? error.message : error}`,\r\n            type: logType,\r\n            meta: {\r\n              error,\r\n              vm\r\n            }\r\n          })\r\n          if (process.env.NODE_ENV !== 'development') return\r\n          util.log.capsule('D2Admin', 'ErrorHandler', logType)\r\n          util.log.danger('>>>>>> 错误信息 >>>>>>')\r\n          console.log(info)\r\n          util.log.danger('>>>>>> Vue 实例 >>>>>>')\r\n          console.log(vm)\r\n          util.log.danger('>>>>>> Error >>>>>>')\r\n          console.log(error)\r\n        })\r\n      }\r\n    }\r\n    if (process.env.NODE_ENV === 'development') {\r\n      Vue.config.warnHandler = writeLog('warning')\r\n    }\r\n    Vue.config.errorHandler = writeLog('danger')\r\n    window.onunhandledrejection = error => {\r\n      store.dispatch('d2admin/log/push', {\r\n        message: get(error, 'reason.message', 'Unknown error'),\r\n        type: 'danger',\r\n        meta: {\r\n          error: get(error, 'reason'),\r\n          trace: get(error, 'reason.stack')\r\n        }\r\n      })\r\n    }\r\n    window.onerror = (event, source, lineno, colno, error) => {\r\n      store.dispatch('d2admin/log/push', {\r\n        message: get(error, 'message', 'Unknown error'),\r\n        type: 'danger',\r\n        meta: {\r\n          error,\r\n          trace: get(error, 'stack'),\r\n          source: `${source}@${lineno}:${colno}`,\r\n          event: event\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n"]}]}