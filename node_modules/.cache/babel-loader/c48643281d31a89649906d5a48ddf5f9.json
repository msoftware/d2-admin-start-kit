{"remainingRequest":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\theme.js","dependencies":[{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\theme.js","mtime":1593435051128},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592891886067},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js","mtime":1592891886030},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js","mtime":1592891895300}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Qcm9qZWt0ZS92dWUtYWRtaW4vZDItYWRtaW4tc3RhcnQta2l0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgZ2V0IH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHNldHRpbmcgZnJvbSAnQC9zZXR0aW5nLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIC8vIOS4u+mimAogICAgbGlzdDogZ2V0KHNldHRpbmcsICd0aGVtZS5saXN0JywgW10pLAogICAgLy8g546w5Zyo5r+A5rS755qE5Li76aKYIOi/meW6lOivpeaYr+S4gOS4quWQjeWtlyDkuI3mmK/lr7nosaEKICAgIGFjdGl2ZU5hbWU6IGdldChzZXR0aW5nLCAndGhlbWUubGlzdFswXS5uYW1lJywgJ2QyJykKICB9LAogIGdldHRlcnM6IHsKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDov5Tlm57lvZPliY3nmoTkuLvpopjkv6Hmga8g5LiN5piv5LiA5Liq5ZCN5a2XIOiAjOaYr+W9k+WJjea/gOa0u+S4u+mimOeahOaJgOacieaVsOaNrg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBzdGF0ZQ0KICAgICAqLwogICAgYWN0aXZlU2V0dGluZzogZnVuY3Rpb24gYWN0aXZlU2V0dGluZyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubGlzdC5maW5kKGZ1bmN0aW9uICh0aGVtZSkgewogICAgICAgIHJldHVybiB0aGVtZS5uYW1lID09PSBzdGF0ZS5hY3RpdmVOYW1lOwogICAgICB9KTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDmv4DmtLvkuIDkuKrkuLvpopgNCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGhlbWVWYWx1ZSDpnIDopoHmv4DmtLvnmoTkuLvpopjlkI3np7ANCiAgICAgKi8KICAgIHNldDogZnVuY3Rpb24gc2V0KF9yZWYsIHRoZW1lTmFtZSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCBkaXNwYXRjaDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGUsIGNvbW1pdCA9IF9yZWYuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICAvLyDmo4Dmn6Xov5nkuKrkuLvpopjlnKjkuLvpopjliJfooajph4zmmK/lkKblrZjlnKgKICAgICAgICAgICAgICAgIHN0YXRlLmFjdGl2ZU5hbWUgPSBzdGF0ZS5saXN0LmZpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGUubmFtZSA9PT0gdGhlbWVOYW1lOwogICAgICAgICAgICAgICAgfSkgPyB0aGVtZU5hbWUgOiBzdGF0ZS5saXN0WzBdLm5hbWU7IC8vIOWwhiB2dWV4IOS4reeahOS4u+mimOW6lOeUqOWIsCBkb20KCiAgICAgICAgICAgICAgICBjb21taXQoJ2RvbScpOyAvLyDmjIHkuYXljJYKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9zZXQnLCB7CiAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgIHBhdGg6ICd0aGVtZS5hY3RpdmVOYW1lJywKICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRlLmFjdGl2ZU5hbWUsCiAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uIOS7juaMgeS5heWMluaVsOaNruWKoOi9veS4u+mimOiuvue9riAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dA0KICAgICAqLwogICAgbG9hZDogZnVuY3Rpb24gbG9hZChfcmVmMikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIGFjdGl2ZU5hbWU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGUsIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9nZXQnLCB7CiAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgIHBhdGg6ICd0aGVtZS5hY3RpdmVOYW1lJywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBzdGF0ZS5saXN0WzBdLm5hbWUsCiAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGFjdGl2ZU5hbWUgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmxpc3QuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZS5uYW1lID09PSBhY3RpdmVOYW1lOwogICAgICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzdGF0ZS5hY3RpdmVOYW1lID0gYWN0aXZlTmFtZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlTmFtZSA9IHN0YXRlLmxpc3RbMF0ubmFtZTsgLy8g5oyB5LmF5YyWCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9zZXQnLCB7CiAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgIHBhdGg6ICd0aGVtZS5hY3RpdmVOYW1lJywKICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRlLmFjdGl2ZU5hbWUsCiAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAvLyDlsIYgdnVleCDkuK3nmoTkuLvpopjlupTnlKjliLAgZG9tCiAgICAgICAgICAgICAgICBjb21taXQoJ2RvbScpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDlsIYgdnVleCDkuK3nmoTkuLvpopjlupTnlKjliLAgZG9tDQogICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlIHN0YXRlDQogICAgICovCiAgICBkb206IGZ1bmN0aW9uIGRvbShzdGF0ZSkgewogICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSA9ICJ0aGVtZS0iLmNvbmNhdChzdGF0ZS5hY3RpdmVOYW1lKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:/Projekte/vue-admin/d2-admin-start-kit/src/store/modules/d2admin/modules/theme.js"],"names":["get","setting","namespaced","state","list","activeName","getters","activeSetting","find","theme","name","actions","set","themeName","commit","dispatch","e","dbName","path","value","user","root","load","defaultValue","mutations","dom","document","body","className"],"mappings":"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","sourcesContent":["import { get } from 'lodash'\r\nimport setting from '@/setting.js'\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    // 主题\r\n    list: get(setting, 'theme.list', []),\r\n    // 现在激活的主题 这应该是一个名字 不是对象\r\n    activeName: get(setting, 'theme.list[0].name', 'd2')\r\n  },\r\n  getters: {\r\n    /**\r\n     * @description 返回当前的主题信息 不是一个名字 而是当前激活主题的所有数据\r\n     * @param {Object} state state\r\n     */\r\n    activeSetting (state) {\r\n      return state.list.find(theme => theme.name === state.activeName)\r\n    }\r\n  },\r\n  actions: {\r\n    /**\r\n     * @description 激活一个主题\r\n     * @param {String} themeValue 需要激活的主题名称\r\n     */\r\n    async set ({ state, commit, dispatch }, themeName) {\r\n      // 检查这个主题在主题列表里是否存在\r\n      state.activeName = state.list.find(e => e.name === themeName) ? themeName : state.list[0].name\r\n      // 将 vuex 中的主题应用到 dom\r\n      commit('dom')\r\n      // 持久化\r\n      await dispatch('d2admin/db/set', {\r\n        dbName: 'sys',\r\n        path: 'theme.activeName',\r\n        value: state.activeName,\r\n        user: true\r\n      }, { root: true })\r\n    },\r\n    /**\r\n     * @description 从持久化数据加载主题设置     * @param {Object} context\r\n     */\r\n    async load ({ state, commit, dispatch }) {\r\n      // store 赋值\r\n      const activeName = await dispatch('d2admin/db/get', {\r\n        dbName: 'sys',\r\n        path: 'theme.activeName',\r\n        defaultValue: state.list[0].name,\r\n        user: true\r\n      }, { root: true })\r\n      // 检查这个主题在主题列表里是否存在\r\n      if (state.list.find(e => e.name === activeName)) {\r\n        state.activeName = activeName\r\n      } else {\r\n        state.activeName = state.list[0].name\r\n        // 持久化\r\n        await dispatch('d2admin/db/set', {\r\n          dbName: 'sys',\r\n          path: 'theme.activeName',\r\n          value: state.activeName,\r\n          user: true\r\n        }, { root: true })\r\n      }\r\n      // 将 vuex 中的主题应用到 dom\r\n      commit('dom')\r\n    }\r\n  },\r\n  mutations: {\r\n    /**\r\n     * @description 将 vuex 中的主题应用到 dom\r\n     * @param {Object} state state\r\n     */\r\n    dom (state) {\r\n      document.body.className = `theme-${state.activeName}`\r\n    }\r\n  }\r\n}\r\n"]}]}