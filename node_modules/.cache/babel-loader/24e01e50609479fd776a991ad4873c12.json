{"remainingRequest":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\size.js","dependencies":[{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\size.js","mtime":1593434353521},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Qcm9qZWt0ZS92dWUtYWRtaW4vZDItYWRtaW4tc3RhcnQta2l0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIC8vIOWwuuWvuAogICAgdmFsdWU6ICcnIC8vIG1lZGl1bSBzbWFsbCBtaW5pCgogIH0sCiAgYWN0aW9uczogewogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uIOWwhuW9k+WJjeeahOiuvue9ruW6lOeUqOWIsCBlbGVtZW50DQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlZnJlc2gg5piv5ZCm5Zyo6K6+572u5LmL5ZCO5Yi35paw6aG16Z2iDQogICAgICovCiAgICBhcHBseTogZnVuY3Rpb24gYXBwbHkoX3JlZiwgcmVmcmVzaCkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLAogICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIFZ1ZS5wcm90b3R5cGUuJEVMRU1FTlQuc2l6ZSA9IHN0YXRlLnZhbHVlOwoKICAgICAgaWYgKHJlZnJlc2gpIHsKICAgICAgICBjb21taXQoJ2QyYWRtaW4vcGFnZS9rZWVwQWxpdmVDbGVhbicsIG51bGwsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgICByb3V0ZXIucmVwbGFjZSgnL3JlZnJlc2gnKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb24g56Gu6K6k5bey57uP5Yqg6L2957uE5Lu25bC65a+46K6+572uIGh0dHBzOi8vZ2l0aHViLmNvbS9kMi1wcm9qZWN0cy9kMi1hZG1pbi9pc3N1ZXMvMTk4DQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKi8KICAgIGlzTG9hZGVkOiBmdW5jdGlvbiBpc0xvYWRlZChfcmVmMikgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgICAgaWYgKHN0YXRlLnZhbHVlKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChzdGF0ZS52YWx1ZSkgcmVzb2x2ZShjbGVhckludGVydmFsKHRpbWVyKSk7CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uIOiuvue9ruWwuuWvuA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0DQogICAgICogQHBhcmFtIHtTdHJpbmd9IHNpemUg5bC65a+4DQogICAgICovCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChfcmVmMywgc2l6ZSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBzdGF0ZSwgZGlzcGF0Y2g7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZSwgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIC8vIHN0b3JlIOi1i+WAvAogICAgICAgICAgICAgICAgc3RhdGUudmFsdWUgPSBzaXplOyAvLyDlupTnlKgKCiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnYXBwbHknLCB0cnVlKTsgLy8g5oyB5LmF5YyWCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2QyYWRtaW4vZGIvc2V0JywgewogICAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgICBwYXRoOiAnc2l6ZS52YWx1ZScsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0ZS52YWx1ZSwKICAgICAgICAgICAgICAgICAgdXNlcjogdHJ1ZQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb24g5LuO5oyB5LmF5YyW5pWw5o2u6K+75Y+W5bC65a+46K6+572uDQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKi8KICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoX3JlZjQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBkaXNwYXRjaDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZSwgZGlzcGF0Y2ggPSBfcmVmNC5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9nZXQnLCB7CiAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgIHBhdGg6ICdzaXplLnZhbHVlJywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnZGVmYXVsdCcsCiAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAvLyDlupTnlKgKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdhcHBseScpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:/Projekte/vue-admin/d2-admin-start-kit/src/store/modules/d2admin/modules/size.js"],"names":["Vue","router","namespaced","state","value","actions","apply","refresh","commit","prototype","$ELEMENT","size","root","replace","isLoaded","Promise","resolve","timer","setInterval","clearInterval","set","dispatch","dbName","path","user","load","defaultValue"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACL;AACAC,IAAAA,KAAK,EAAE,EAFF,CAEK;;AAFL,GAFM;AAMbC,EAAAA,OAAO,EAAE;AACP;;;;;AAKAC,IAAAA,KANO,uBAMmBC,OANnB,EAM4B;AAAA,UAA1BJ,KAA0B,QAA1BA,KAA0B;AAAA,UAAnBK,MAAmB,QAAnBA,MAAmB;AACjCR,MAAAA,GAAG,CAACS,SAAJ,CAAcC,QAAd,CAAuBC,IAAvB,GAA8BR,KAAK,CAACC,KAApC;;AACA,UAAIG,OAAJ,EAAa;AACXC,QAAAA,MAAM,CAAC,6BAAD,EAAgC,IAAhC,EAAsC;AAAEI,UAAAA,IAAI,EAAE;AAAR,SAAtC,CAAN;AACAX,QAAAA,MAAM,CAACY,OAAP,CAAe,UAAf;AACD;AACF,KAZM;;AAaP;;;;AAIAC,IAAAA,QAjBO,2BAiBc;AAAA,UAATX,KAAS,SAATA,KAAS;AACnB,UAAIA,KAAK,CAACC,KAAV,EAAiB,OAAOW,OAAO,CAACC,OAAR,EAAP;AACjB,aAAO,IAAID,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,YAAMC,KAAK,GAAGC,WAAW,CAAC,YAAM;AAC9B,cAAIf,KAAK,CAACC,KAAV,EAAiBY,OAAO,CAACG,aAAa,CAACF,KAAD,CAAd,CAAP;AAClB,SAFwB,EAEtB,EAFsB,CAAzB;AAGD,OAJM,CAAP;AAKD,KAxBM;;AAyBP;;;;;AAKMG,IAAAA,GA9BC,sBA8ByBT,IA9BzB,EA8B+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAzBR,gBAAAA,KAAyB,SAAzBA,KAAyB,EAAlBkB,QAAkB,SAAlBA,QAAkB;AACpC;AACAlB,gBAAAA,KAAK,CAACC,KAAN,GAAcO,IAAd,CAFoC,CAGpC;;AACAU,gBAAAA,QAAQ,CAAC,OAAD,EAAU,IAAV,CAAR,CAJoC,CAKpC;;AALoC;AAAA,uBAM9BA,QAAQ,CAAC,gBAAD,EAAmB;AAC/BC,kBAAAA,MAAM,EAAE,KADuB;AAE/BC,kBAAAA,IAAI,EAAE,YAFyB;AAG/BnB,kBAAAA,KAAK,EAAED,KAAK,CAACC,KAHkB;AAI/BoB,kBAAAA,IAAI,EAAE;AAJyB,iBAAnB,EAKX;AAAEZ,kBAAAA,IAAI,EAAE;AAAR,iBALW,CANsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYrC,KA1CM;;AA2CP;;;;AAIMa,IAAAA,IA/CC,uBA+C0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAnBtB,gBAAAA,KAAmB,SAAnBA,KAAmB,EAAZkB,QAAY,SAAZA,QAAY;AAAA;AAAA,uBAEXA,QAAQ,CAAC,gBAAD,EAAmB;AAC7CC,kBAAAA,MAAM,EAAE,KADqC;AAE7CC,kBAAAA,IAAI,EAAE,YAFuC;AAG7CG,kBAAAA,YAAY,EAAE,SAH+B;AAI7CF,kBAAAA,IAAI,EAAE;AAJuC,iBAAnB,EAKzB;AAAEZ,kBAAAA,IAAI,EAAE;AAAR,iBALyB,CAFG;;AAAA;AAE/BT,gBAAAA,KAAK,CAACC,KAFyB;AAQ/B;AACAiB,gBAAAA,QAAQ,CAAC,OAAD,CAAR;;AAT+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUhC;AAzDM;AANI,CAAf","sourcesContent":["import Vue from 'vue'\r\nimport router from '@/router'\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    // 尺寸\r\n    value: '' // medium small mini\r\n  },\r\n  actions: {\r\n    /**\r\n     * @description 将当前的设置应用到 element\r\n     * @param {Object} context\r\n     * @param {Boolean} refresh 是否在设置之后刷新页面\r\n     */\r\n    apply ({ state, commit }, refresh) {\r\n      Vue.prototype.$ELEMENT.size = state.value\r\n      if (refresh) {\r\n        commit('d2admin/page/keepAliveClean', null, { root: true })\r\n        router.replace('/refresh')\r\n      }\r\n    },\r\n    /**\r\n     * @description 确认已经加载组件尺寸设置 https://github.com/d2-projects/d2-admin/issues/198\r\n     * @param {Object} context\r\n     */\r\n    isLoaded ({ state }) {\r\n      if (state.value) return Promise.resolve()\r\n      return new Promise(resolve => {\r\n        const timer = setInterval(() => {\r\n          if (state.value) resolve(clearInterval(timer))\r\n        }, 10)\r\n      })\r\n    },\r\n    /**\r\n     * @description 设置尺寸\r\n     * @param {Object} context\r\n     * @param {String} size 尺寸\r\n     */\r\n    async set ({ state, dispatch }, size) {\r\n      // store 赋值\r\n      state.value = size\r\n      // 应用\r\n      dispatch('apply', true)\r\n      // 持久化\r\n      await dispatch('d2admin/db/set', {\r\n        dbName: 'sys',\r\n        path: 'size.value',\r\n        value: state.value,\r\n        user: true\r\n      }, { root: true })\r\n    },\r\n    /**\r\n     * @description 从持久化数据读取尺寸设置\r\n     * @param {Object} context\r\n     */\r\n    async load ({ state, dispatch }) {\r\n      // store 赋值\r\n      state.value = await dispatch('d2admin/db/get', {\r\n        dbName: 'sys',\r\n        path: 'size.value',\r\n        defaultValue: 'default',\r\n        user: true\r\n      }, { root: true })\r\n      // 应用\r\n      dispatch('apply')\r\n    }\r\n  }\r\n}\r\n"]}]}