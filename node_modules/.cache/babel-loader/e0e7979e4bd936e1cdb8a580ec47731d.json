{"remainingRequest":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\api\\service.js","dependencies":[{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\api\\service.js","mtime":1593435051081},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592891886067},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js","mtime":1592891886030},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js","mtime":1592891895300}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBBZGFwdGVyIGZyb20gJ2F4aW9zLW1vY2stYWRhcHRlcic7CmltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB1dGlsIGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IHsgZXJyb3JMb2csIGVycm9yQ3JlYXRlIH0gZnJvbSAnLi90b29scyc7Ci8qKg0KICogQGRlc2NyaXB0aW9uIOWIm+W7uuivt+axguWunuS+iw0KICovCgpmdW5jdGlvbiBjcmVhdGVTZXJ2aWNlKCkgewogIC8vIOWIm+W7uuS4gOS4qiBheGlvcyDlrp7kvosKICB2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSgpOyAvLyDor7fmsYLmi6bmiKoKCiAgc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogICAgcmV0dXJuIGNvbmZpZzsKICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIC8vIOWPkemAgeWksei0pQogICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9KTsgLy8g5ZON5bqU5oum5oiqCgogIHNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIC8vIGRhdGFBeGlvcyDmmK8gYXhpb3Mg6L+U5Zue5pWw5o2u5Lit55qEIGRhdGEKICAgIHZhciBkYXRhQXhpb3MgPSByZXNwb25zZS5kYXRhOyAvLyDov5nkuKrnirbmgIHnoIHmmK/lkozlkI7nq6/nuqblrprnmoQKCiAgICB2YXIgY29kZSA9IGRhdGFBeGlvcy5jb2RlOyAvLyDmoLnmja4gY29kZSDov5vooYzliKTmlq0KCiAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIC8vIOWmguaenOayoeaciSBjb2RlIOS7o+ihqOi/meS4jeaYr+mhueebruWQjuerr+W8gOWPkeeahOaOpeWPoyDmr5TlpoLlj6/og73mmK8gRDJBZG1pbiDor7fmsYLmnIDmlrDniYjmnKwKICAgICAgcmV0dXJuIGRhdGFBeGlvczsKICAgIH0gZWxzZSB7CiAgICAgIC8vIOaciSBjb2RlIOS7o+ihqOi/meaYr+S4gOS4quWQjuerr+aOpeWPoyDlj6/ku6Xov5vooYzov5vkuIDmraXnmoTliKTmlq0KICAgICAgc3dpdGNoIChjb2RlKSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgLy8gWyDnpLrkvosgXSBjb2RlID09PSAwIOS7o+ihqOayoeaciemUmeivrwogICAgICAgICAgcmV0dXJuIGRhdGFBeGlvcy5kYXRhOwoKICAgICAgICBjYXNlICd4eHgnOgogICAgICAgICAgLy8gWyDnpLrkvosgXSDlhbblroPlkozlkI7lj7DnuqblrprnmoQgY29kZQogICAgICAgICAgZXJyb3JDcmVhdGUoIlsgY29kZTogeHh4IF0gIi5jb25jYXQoZGF0YUF4aW9zLm1zZywgIjogIikuY29uY2F0KHJlc3BvbnNlLmNvbmZpZy51cmwpKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgLy8g5LiN5piv5q2j56Gu55qEIGNvZGUKICAgICAgICAgIGVycm9yQ3JlYXRlKCIiLmNvbmNhdChkYXRhQXhpb3MubXNnLCAiOiAiKS5jb25jYXQocmVzcG9uc2UuY29uZmlnLnVybCkpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIHZhciBzdGF0dXMgPSBnZXQoZXJyb3IsICdyZXNwb25zZS5zdGF0dXMnKTsKCiAgICBzd2l0Y2ggKHN0YXR1cykgewogICAgICBjYXNlIDQwMDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+ivt+axgumUmeivryc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwMToKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+acquaOiOadg++8jOivt+eZu+W9lSc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwMzoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+aLkue7neiuv+mXric7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwNDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gIlx1OEJGN1x1NkM0Mlx1NTczMFx1NTc0MFx1NTFGQVx1OTUxOTogIi5jb25jYXQoZXJyb3IucmVzcG9uc2UuY29uZmlnLnVybCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwODoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+ivt+axgui2heaXtic7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwMDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+acjeWKoeWZqOWGhemDqOmUmeivryc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwMToKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+acjeWKoeacquWunueOsCc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwMjoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+e9keWFs+mUmeivryc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwMzoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+acjeWKoeS4jeWPr+eUqCc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwNDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+e9keWFs+i2heaXtic7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwNToKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ0hUVFDniYjmnKzkuI3lj5fmlK/mjIEnOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBicmVhazsKICAgIH0KCiAgICBlcnJvckxvZyhlcnJvcik7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwogIHJldHVybiBzZXJ2aWNlOwp9Ci8qKg0KICogQGRlc2NyaXB0aW9uIOWIm+W7uuivt+axguaWueazlQ0KICogQHBhcmFtIHtPYmplY3R9IHNlcnZpY2UgYXhpb3Mg5a6e5L6LDQogKi8KCgpmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0RnVuY3Rpb24oc2VydmljZSkgewogIHJldHVybiBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICB2YXIgdG9rZW4gPSB1dGlsLmNvb2tpZXMuZ2V0KCd0b2tlbicpOwogICAgdmFyIGNvbmZpZ0RlZmF1bHQgPSB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiB0b2tlbiwKICAgICAgICAnQ29udGVudC1UeXBlJzogZ2V0KGNvbmZpZywgJ2hlYWRlcnMuQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKQogICAgICB9LAogICAgICB0aW1lb3V0OiA1MDAwLAogICAgICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSSwKICAgICAgZGF0YToge30KICAgIH07CiAgICByZXR1cm4gc2VydmljZShPYmplY3QuYXNzaWduKGNvbmZpZ0RlZmF1bHQsIGNvbmZpZykpOwogIH07Cn0gLy8g55So5LqO55yf5a6e572R57uc6K+35rGC55qE5a6e5L6L5ZKM6K+35rGC5pa55rOVCgoKZXhwb3J0IHZhciBzZXJ2aWNlID0gY3JlYXRlU2VydmljZSgpOwpleHBvcnQgdmFyIHJlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0RnVuY3Rpb24oc2VydmljZSk7IC8vIOeUqOS6juaooeaLn+e9kee7nOivt+axgueahOWunuS+i+WSjOivt+axguaWueazlQoKZXhwb3J0IHZhciBzZXJ2aWNlRm9yTW9jayA9IGNyZWF0ZVNlcnZpY2UoKTsKZXhwb3J0IHZhciByZXF1ZXN0Rm9yTW9jayA9IGNyZWF0ZVJlcXVlc3RGdW5jdGlvbihzZXJ2aWNlRm9yTW9jayk7IC8vIOe9kee7nOivt+axguaVsOaNruaooeaLn+W3peWFtwoKZXhwb3J0IHZhciBtb2NrID0gbmV3IEFkYXB0ZXIoc2VydmljZUZvck1vY2spOw=="},{"version":3,"sources":["C:/Projekte/vue-admin/d2-admin-start-kit/src/api/service.js"],"names":["axios","Adapter","get","util","errorLog","errorCreate","createService","service","create","interceptors","request","use","config","error","console","log","Promise","reject","response","dataAxios","data","code","undefined","msg","url","status","message","createRequestFunction","token","cookies","configDefault","headers","Authorization","timeout","baseURL","process","env","VUE_APP_API","Object","assign","serviceForMock","requestForMock","mock"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport Adapter from 'axios-mock-adapter'\r\nimport { get } from 'lodash'\r\nimport util from '@/libs/util'\r\nimport { errorLog, errorCreate } from './tools'\r\n\r\n/**\r\n * @description 创建请求实例\r\n */\r\nfunction createService () {\r\n  // 创建一个 axios 实例\r\n  const service = axios.create()\r\n  // 请求拦截\r\n  service.interceptors.request.use(\r\n    config => config,\r\n    error => {\r\n      // 发送失败\r\n      console.log(error)\r\n      return Promise.reject(error)\r\n    }\r\n  )\r\n  // 响应拦截\r\n  service.interceptors.response.use(\r\n    response => {\r\n      // dataAxios 是 axios 返回数据中的 data\r\n      const dataAxios = response.data\r\n      // 这个状态码是和后端约定的\r\n      const { code } = dataAxios\r\n      // 根据 code 进行判断\r\n      if (code === undefined) {\r\n        // 如果没有 code 代表这不是项目后端开发的接口 比如可能是 D2Admin 请求最新版本\r\n        return dataAxios\r\n      } else {\r\n        // 有 code 代表这是一个后端接口 可以进行进一步的判断\r\n        switch (code) {\r\n          case 0:\r\n            // [ 示例 ] code === 0 代表没有错误\r\n            return dataAxios.data\r\n          case 'xxx':\r\n            // [ 示例 ] 其它和后台约定的 code\r\n            errorCreate(`[ code: xxx ] ${dataAxios.msg}: ${response.config.url}`)\r\n            break\r\n          default:\r\n            // 不是正确的 code\r\n            errorCreate(`${dataAxios.msg}: ${response.config.url}`)\r\n            break\r\n        }\r\n      }\r\n    },\r\n    error => {\r\n      const status = get(error, 'response.status')\r\n      switch (status) {\r\n        case 400: error.message = '请求错误'; break\r\n        case 401: error.message = '未授权，请登录'; break\r\n        case 403: error.message = '拒绝访问'; break\r\n        case 404: error.message = `请求地址出错: ${error.response.config.url}`; break\r\n        case 408: error.message = '请求超时'; break\r\n        case 500: error.message = '服务器内部错误'; break\r\n        case 501: error.message = '服务未实现'; break\r\n        case 502: error.message = '网关错误'; break\r\n        case 503: error.message = '服务不可用'; break\r\n        case 504: error.message = '网关超时'; break\r\n        case 505: error.message = 'HTTP版本不受支持'; break\r\n        default: break\r\n      }\r\n      errorLog(error)\r\n      return Promise.reject(error)\r\n    }\r\n  )\r\n  return service\r\n}\r\n\r\n/**\r\n * @description 创建请求方法\r\n * @param {Object} service axios 实例\r\n */\r\nfunction createRequestFunction (service) {\r\n  return function (config) {\r\n    const token = util.cookies.get('token')\r\n    const configDefault = {\r\n      headers: {\r\n        Authorization: token,\r\n        'Content-Type': get(config, 'headers.Content-Type', 'application/json')\r\n      },\r\n      timeout: 5000,\r\n      baseURL: process.env.VUE_APP_API,\r\n      data: {}\r\n    }\r\n    return service(Object.assign(configDefault, config))\r\n  }\r\n}\r\n\r\n// 用于真实网络请求的实例和请求方法\r\nexport const service = createService()\r\nexport const request = createRequestFunction(service)\r\n\r\n// 用于模拟网络请求的实例和请求方法\r\nexport const serviceForMock = createService()\r\nexport const requestForMock = createRequestFunction(serviceForMock)\r\n\r\n// 网络请求数据模拟工具\r\nexport const mock = new Adapter(serviceForMock)\r\n"]}]}