{"remainingRequest":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\page.js","dependencies":[{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\page.js","mtime":1593435051127},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1592891886067},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js","mtime":1592891886030},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js","mtime":1592891895300}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1Byb2pla3RlL3Z1ZS1hZG1pbi9kMi1hZG1pbi1zdGFydC1raXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBjbG9uZURlZXAsIHVuaXEsIGdldCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgc2V0dGluZyBmcm9tICdAL3NldHRpbmcuanMnOyAvLyDliKTlrprmmK/lkKbpnIDopoHnvJPlrZgKCnZhciBpc0tlZXBBbGl2ZSA9IGZ1bmN0aW9uIGlzS2VlcEFsaXZlKGRhdGEpIHsKICByZXR1cm4gZ2V0KGRhdGEsICdtZXRhLmNhY2hlJywgZmFsc2UpOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIC8vIOWPr+S7peWcqOWkmumhtSB0YWIg5qih5byP5LiL5pi+56S655qE6aG16Z2iCiAgICBwb29sOiBbXSwKICAgIC8vIOW9k+WJjeaYvuekuueahOWkmumhtemdouWIl+ihqAogICAgb3BlbmVkOiBnZXQoc2V0dGluZywgJ3BhZ2Uub3BlbmVkJywgW10pLAogICAgLy8g5bey57uP5Yqg6L295aSa5qCH562+6aG15pWw5o2uIGh0dHBzOi8vZ2l0aHViLmNvbS9kMi1wcm9qZWN0cy9kMi1hZG1pbi9pc3N1ZXMvMjAxCiAgICBvcGVuZWRMb2FkZWQ6IGZhbHNlLAogICAgLy8g5b2T5YmN6aG16Z2iCiAgICBjdXJyZW50OiAnJywKICAgIC8vIOmcgOimgee8k+WtmOeahOmhtemdoiBuYW1lCiAgICBrZWVwQWxpdmU6IFtdCiAgfSwKICBhY3Rpb25zOiB7CiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb24g56Gu6K6k5bey57uP5Yqg6L295aSa5qCH562+6aG15pWw5o2uIGh0dHBzOi8vZ2l0aHViLmNvbS9kMi1wcm9qZWN0cy9kMi1hZG1pbi9pc3N1ZXMvMjAxDQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKi8KICAgIGlzTG9hZGVkOiBmdW5jdGlvbiBpc0xvYWRlZChfcmVmKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGU7CiAgICAgIGlmIChzdGF0ZS5vcGVuZWRMb2FkZWQpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHN0YXRlLm9wZW5lZExvYWRlZCkgcmVzb2x2ZShjbGVhckludGVydmFsKHRpbWVyKSk7CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGNsYXNzIG9wZW5lZA0KICAgICAqIEBkZXNjcmlwdGlvbiDku47mjIHkuYXljJbmlbDmja7ovb3lhaXmoIfnrb7pobXliJfooagNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dA0KICAgICAqLwogICAgb3BlbmVkTG9hZDogZnVuY3Rpb24gb3BlbmVkTG9hZChfcmVmMikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCBkaXNwYXRjaCwgdmFsdWUsIHZhbGlkOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGUsIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdkMmFkbWluL2RiL2dldCcsIHsKICAgICAgICAgICAgICAgICAgZGJOYW1lOiAnc3lzJywKICAgICAgICAgICAgICAgICAgcGF0aDogJ3BhZ2Uub3BlbmVkJywKICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBzZXR0aW5nLnBhZ2Uub3BlbmVkLAogICAgICAgICAgICAgICAgICB1c2VyOiB0cnVlCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAvLyDlnKjlpITnkIblh73mlbDkuK3ov5vooYzmlbDmja7kvJjljJYg6L+H5ruk5o6J546w5Zyo5bey57uP5aSx5pWI55qE6aG1562+5oiW6ICF5bey57uP5pS55Y+Y5LqG5L+h5oGv55qE6aG1562+CiAgICAgICAgICAgICAgICAvLyDku6UgZnVsbFBhdGgg5a2X5q615Li65YeGCiAgICAgICAgICAgICAgICAvLyDlpoLmnpzpobXpnaLov4flpJrnmoTor53lj6/og73pnIDopoHkvJjljJbnrpfms5UKICAgICAgICAgICAgICAgIC8vIHZhbGlkIOacieaViOWIl+ihqCAxLCAxLCAwLCAxID0+IOacieaViCwg5pyJ5pWILCDlpLHmlYgsIOacieaViAogICAgICAgICAgICAgICAgdmFsaWQgPSBbXTsgLy8g5aSE55CG5pWw5o2uCgogICAgICAgICAgICAgICAgc3RhdGUub3BlbmVkID0gdmFsdWUubWFwKGZ1bmN0aW9uIChvcGVuZWQpIHsKICAgICAgICAgICAgICAgICAgLy8g5b+955Wl6aaW6aG1CiAgICAgICAgICAgICAgICAgIGlmIChvcGVuZWQuZnVsbFBhdGggPT09ICcvaW5kZXgnKSB7CiAgICAgICAgICAgICAgICAgICAgdmFsaWQucHVzaCgxKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3BlbmVkOwogICAgICAgICAgICAgICAgICB9IC8vIOWwneivleWcqOaJgOacieeahOaUr+aMgeWkmuagh+etvumhteeahOmhtemdoumHjOaJvuWIsCBuYW1lIOWMuemFjeeahOmhtemdogoKCiAgICAgICAgICAgICAgICAgIHZhciBmaW5kID0gc3RhdGUucG9vbC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gb3BlbmVkLm5hbWU7CiAgICAgICAgICAgICAgICAgIH0pOyAvLyDorrDlvZXmnInmlYjmiJbml6DmlYjkv6Hmga8KCiAgICAgICAgICAgICAgICAgIHZhbGlkLnB1c2goZmluZCA/IDEgOiAwKTsgLy8g6L+U5Zue5ZCI5bm25ZCO55qE5pWw5o2uIOaWsOeahOimhuebluaXp+eahAogICAgICAgICAgICAgICAgICAvLyDmlrDnmoTmlbDmja7kuK3kuIDoiKzkuI3kvJrmkLrluKYgcGFyYW1zIOWSjCBxdWVyeSwg5omA5Lul5pen55qE5Y+C5pWw5Lya55WZ5a2YCgogICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgb3BlbmVkLCBmaW5kKTsKICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAob3BlbmVkLCBpbmRleCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRbaW5kZXhdID09PSAxOwogICAgICAgICAgICAgICAgfSk7IC8vIOagh+iusOW3sue7j+WKoOi9veWkmuagh+etvumhteaVsOaNriBodHRwczovL2dpdGh1Yi5jb20vZDItcHJvamVjdHMvZDItYWRtaW4vaXNzdWVzLzIwMQoKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZExvYWRlZCA9IHRydWU7IC8vIOagueaNriBvcGVuZWQg5pWw5o2u55Sf5oiQ57yT5a2Y6K6+572uCgogICAgICAgICAgICAgICAgY29tbWl0KCdrZWVwQWxpdmVSZWZyZXNoJyk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICog5bCGIG9wZW5lZCDlsZ7mgKfotYvlgLzlubbmjIHkuYXljJYg5Zyo6L+Z5LmL5YmN6K+35YWI56Gu5L+d5bey57uP5pu05paw5LqGIHN0YXRlLm9wZW5lZA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0DQogICAgICovCiAgICBvcGVuZWQyZGI6IGZ1bmN0aW9uIG9wZW5lZDJkYihfcmVmMykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgc3RhdGUsIGRpc3BhdGNoOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlLCBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoOwogICAgICAgICAgICAgICAgLy8g6K6+572u5pWw5o2uCiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnZDJhZG1pbi9kYi9zZXQnLCB7CiAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgIHBhdGg6ICdwYWdlLm9wZW5lZCcsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0ZS5vcGVuZWQsCiAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAY2xhc3Mgb3BlbmVkDQogICAgICogQGRlc2NyaXB0aW9uIOabtOaWsOmhtemdouWIl+ihqOS4iueahOafkOS4gOmhuQ0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0DQogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgeyBpbmRleCwgcGFyYW1zLCBxdWVyeSwgZnVsbFBhdGggfSDot6/nlLHkv6Hmga8NCiAgICAgKi8KICAgIG9wZW5lZFVwZGF0ZTogZnVuY3Rpb24gb3BlbmVkVXBkYXRlKF9yZWY0LCBfcmVmNSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIGluZGV4LCBwYXJhbXMsIHF1ZXJ5LCBmdWxsUGF0aCwgcGFnZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZSwgY29tbWl0ID0gX3JlZjQuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgaW5kZXggPSBfcmVmNS5pbmRleCwgcGFyYW1zID0gX3JlZjUucGFyYW1zLCBxdWVyeSA9IF9yZWY1LnF1ZXJ5LCBmdWxsUGF0aCA9IF9yZWY1LmZ1bGxQYXRoOwogICAgICAgICAgICAgICAgLy8g5pu05paw6aG16Z2i5YiX6KGo5p+Q5LiA6aG5CiAgICAgICAgICAgICAgICBwYWdlID0gc3RhdGUub3BlbmVkW2luZGV4XTsKICAgICAgICAgICAgICAgIHBhZ2UucGFyYW1zID0gcGFyYW1zIHx8IHBhZ2UucGFyYW1zOwogICAgICAgICAgICAgICAgcGFnZS5xdWVyeSA9IHF1ZXJ5IHx8IHBhZ2UucXVlcnk7CiAgICAgICAgICAgICAgICBwYWdlLmZ1bGxQYXRoID0gZnVsbFBhdGggfHwgcGFnZS5mdWxsUGF0aDsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5zcGxpY2UoaW5kZXgsIDEsIHBhZ2UpOyAvLyDmjIHkuYXljJYKCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ29wZW5lZDJkYicpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGNsYXNzIG9wZW5lZA0KICAgICAqIEBkZXNjcmlwdGlvbiDph43mjpLpobXpnaLliJfooajkuIrnmoTmn5DkuIDpobkNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dA0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIHsgb2xkSW5kZXgsIG5ld0luZGV4IH0g5L2N572u5L+h5oGvDQogICAgICovCiAgICBvcGVuZWRTb3J0OiBmdW5jdGlvbiBvcGVuZWRTb3J0KF9yZWY2LCBfcmVmNykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIG9sZEluZGV4LCBuZXdJbmRleCwgcGFnZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNi5zdGF0ZSwgY29tbWl0ID0gX3JlZjYuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY2LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgb2xkSW5kZXggPSBfcmVmNy5vbGRJbmRleCwgbmV3SW5kZXggPSBfcmVmNy5uZXdJbmRleDsKICAgICAgICAgICAgICAgIC8vIOmHjeaOkumhtemdouWIl+ihqOafkOS4gOmhuQogICAgICAgICAgICAgICAgcGFnZSA9IHN0YXRlLm9wZW5lZFtvbGRJbmRleF07CiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuZWQuc3BsaWNlKG9sZEluZGV4LCAxKTsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5zcGxpY2UobmV3SW5kZXgsIDAsIHBhZ2UpOyAvLyDmjIHkuYXljJYKCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ29wZW5lZDJkYicpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGNsYXNzIG9wZW5lZA0KICAgICAqIEBkZXNjcmlwdGlvbiDmlrDlop7kuIDkuKogdGFnICjmiZPlvIDkuIDkuKrpobXpnaIpDQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCBuZXcgdGFnIGluZm8NCiAgICAgKi8KICAgIGFkZDogZnVuY3Rpb24gYWRkKF9yZWY4LCBfcmVmOSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIHRhZywgcGFyYW1zLCBxdWVyeSwgZnVsbFBhdGgsIG5ld1RhZzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmOC5zdGF0ZSwgY29tbWl0ID0gX3JlZjguY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY4LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgdGFnID0gX3JlZjkudGFnLCBwYXJhbXMgPSBfcmVmOS5wYXJhbXMsIHF1ZXJ5ID0gX3JlZjkucXVlcnksIGZ1bGxQYXRoID0gX3JlZjkuZnVsbFBhdGg7CiAgICAgICAgICAgICAgICAvLyDorr7nva7mlrDnmoQgdGFnIOWcqOaWsOaJk+W8gOS4gOS4quS7peWJjeayoeaJk+W8gOi/h+eahOmhtemdouaXtuS9v+eUqAogICAgICAgICAgICAgICAgbmV3VGFnID0gdGFnOwogICAgICAgICAgICAgICAgbmV3VGFnLnBhcmFtcyA9IHBhcmFtcyB8fCBuZXdUYWcucGFyYW1zOwogICAgICAgICAgICAgICAgbmV3VGFnLnF1ZXJ5ID0gcXVlcnkgfHwgbmV3VGFnLnF1ZXJ5OwogICAgICAgICAgICAgICAgbmV3VGFnLmZ1bGxQYXRoID0gZnVsbFBhdGggfHwgbmV3VGFnLmZ1bGxQYXRoOyAvLyDmt7vliqDov5vlvZPliY3mmL7npLrnmoTpobXpnaLmlbDnu4QKCiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuZWQucHVzaChuZXdUYWcpOyAvLyDlpoLmnpzov5nkuKrpobXpnaLpnIDopoHnvJPlrZgg5bCG5YW25re75Yqg5Yiw57yT5a2Y6K6+572uCgogICAgICAgICAgICAgICAgaWYgKGlzS2VlcEFsaXZlKG5ld1RhZykpIGNvbW1pdCgna2VlcEFsaXZlUHVzaCcsIHRhZy5uYW1lKTsgLy8g5oyB5LmF5YyWCgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnb3BlbmVkMmRiJyk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGNsYXNzIGN1cnJlbnQNCiAgICAgKiBAZGVzY3JpcHRpb24g5omT5byA5LiA5Liq5paw55qE6aG16Z2iDQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCDku47ot6/nlLHpkqnlrZDnmoQgdG8g5a+56LGh5LiK6I635Y+WIHsgbmFtZSwgcGFyYW1zLCBxdWVyeSwgZnVsbFBhdGgsIG1ldGEgfSDot6/nlLHkv6Hmga8NCiAgICAgKi8KICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oX3JlZjEwLCBfcmVmMTEpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGRpc3BhdGNoLCBuYW1lLCBwYXJhbXMsIHF1ZXJ5LCBmdWxsUGF0aCwgbWV0YSwgb3BlbmVkLCBwYWdlT3BlbmRJbmRleCwgcGFnZU9wZW5kLCBwYWdlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYxMC5zdGF0ZSwgY29tbWl0ID0gX3JlZjEwLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMTAuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBuYW1lID0gX3JlZjExLm5hbWUsIHBhcmFtcyA9IF9yZWYxMS5wYXJhbXMsIHF1ZXJ5ID0gX3JlZjExLnF1ZXJ5LCBmdWxsUGF0aCA9IF9yZWYxMS5mdWxsUGF0aCwgbWV0YSA9IF9yZWYxMS5tZXRhOwogICAgICAgICAgICAgICAgLy8g5bey57uP5omT5byA55qE6aG16Z2iCiAgICAgICAgICAgICAgICBvcGVuZWQgPSBzdGF0ZS5vcGVuZWQ7IC8vIOWIpOaWreatpOmhtemdouaYr+WQpuW3sue7j+aJk+W8gCDlubbkuJTorrDlvZXkvY3nva4KCiAgICAgICAgICAgICAgICBwYWdlT3BlbmRJbmRleCA9IDA7CiAgICAgICAgICAgICAgICBwYWdlT3BlbmQgPSBvcGVuZWQuZmluZChmdW5jdGlvbiAocGFnZSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgdmFyIHNhbWUgPSBwYWdlLmZ1bGxQYXRoID09PSBmdWxsUGF0aDsKICAgICAgICAgICAgICAgICAgcGFnZU9wZW5kSW5kZXggPSBzYW1lID8gaW5kZXggOiBwYWdlT3BlbmRJbmRleDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHNhbWU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoIXBhZ2VPcGVuZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ29wZW5lZFVwZGF0ZScsIHsKICAgICAgICAgICAgICAgICAgaW5kZXg6IHBhZ2VPcGVuZEluZGV4LAogICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcywKICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LAogICAgICAgICAgICAgICAgICBmdWxsUGF0aDogZnVsbFBhdGgKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAvLyDpobXpnaLku6XliY3msqHmnInmiZPlvIDov4cKICAgICAgICAgICAgICAgIHBhZ2UgPSBzdGF0ZS5wb29sLmZpbmQoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHQubmFtZSA9PT0gbmFtZTsKICAgICAgICAgICAgICAgIH0pOyAvLyDlpoLmnpzov5nph4zmsqHmnInmib7liLAgcGFnZSDku6Pooajov5nkuKrot6/nlLHomb3nhLblnKjmoYbmnrblhoUg5L2G5piv5LiN5Y+C5LiO5qCH562+6aG15pi+56S6CgogICAgICAgICAgICAgICAgaWYgKCFwYWdlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2FkZCcsIHsKICAgICAgICAgICAgICAgICAgdGFnOiBPYmplY3QuYXNzaWduKHt9LCBwYWdlKSwKICAgICAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMsCiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgICAgICAgICAgICAgZnVsbFBhdGg6IGZ1bGxQYXRoCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIC8vIOWmguaenOi/meS4qumhtemdoumcgOimgee8k+WtmCDlsIblhbbmt7vliqDliLDnvJPlrZjorr7nva4KICAgICAgICAgICAgICAgIGlmIChpc0tlZXBBbGl2ZSh7CiAgICAgICAgICAgICAgICAgIG1ldGE6IG1ldGEKICAgICAgICAgICAgICAgIH0pKSBjb21taXQoJ2tlZXBBbGl2ZVB1c2gnLCBuYW1lKTsgLy8g6K6+572u5b2T5YmN55qE6aG16Z2iCgogICAgICAgICAgICAgICAgY29tbWl0KCdjdXJyZW50U2V0JywgZnVsbFBhdGgpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBjbGFzcyBvcGVuZWQNCiAgICAgKiBAZGVzY3JpcHRpb24g5YWz6Zet5LiA5LiqIHRhZyAo5YWz6Zet5LiA5Liq6aG16Z2iKQ0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0DQogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgeyB0YWdOYW1lOiDopoHlhbPpl63nmoTmoIfnrb7lkI3lrZcgfQ0KICAgICAqLwogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKF9yZWYxMiwgX3JlZjEzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCBkaXNwYXRjaCwgdGFnTmFtZSwgbmV3UGFnZSwgaXNDdXJyZW50LCBsZW4sIGksIGluZGV4LCBfbmV3UGFnZSwgX25ld1BhZ2UkbmFtZSwgbmFtZSwgX25ld1BhZ2UkcGFyYW1zLCBwYXJhbXMsIF9uZXdQYWdlJHF1ZXJ5LCBxdWVyeSwgcm91dGVyT2JqOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMTIuc3RhdGUsIGNvbW1pdCA9IF9yZWYxMi5jb21taXQsIGRpc3BhdGNoID0gX3JlZjEyLmRpc3BhdGNoOwogICAgICAgICAgICAgICAgdGFnTmFtZSA9IF9yZWYxMy50YWdOYW1lOwogICAgICAgICAgICAgICAgLy8g6aKE5a6a5LiL5Liq5paw6aG16Z2iCiAgICAgICAgICAgICAgICBuZXdQYWdlID0ge307CiAgICAgICAgICAgICAgICBpc0N1cnJlbnQgPSBzdGF0ZS5jdXJyZW50ID09PSB0YWdOYW1lOyAvLyDlpoLmnpzlhbPpl63nmoTpobXpnaLlsLHmmK/lvZPliY3mmL7npLrnmoTpobXpnaIKCiAgICAgICAgICAgICAgICBpZiAoIWlzQ3VycmVudCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyDljrvmib7kuIDkuKrmlrDnmoTpobXpnaIKICAgICAgICAgICAgICAgIGxlbiA9IHN0YXRlLm9wZW5lZC5sZW5ndGg7CiAgICAgICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEoaSA8IGxlbikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUub3BlbmVkW2ldLmZ1bGxQYXRoID09PSB0YWdOYW1lKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBuZXdQYWdlID0gaSA8IGxlbiAtIDEgPyBzdGF0ZS5vcGVuZWRbaSArIDFdIDogc3RhdGUub3BlbmVkW2kgLSAxXTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJicmVhayIsIDE0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgLy8g5om+5Yiw6L+Z5Liq6aG16Z2i5Zyo5bey57uP5omT5byA55qE5pWw5o2u6YeM5piv56ys5Yeg5LiqCiAgICAgICAgICAgICAgICBpbmRleCA9IHN0YXRlLm9wZW5lZC5maW5kSW5kZXgoZnVuY3Rpb24gKHBhZ2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2UuZnVsbFBhdGggPT09IHRhZ05hbWU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgICAvLyDlpoLmnpzov5nkuKrpobXpnaLmmK/nvJPlrZjnmoTpobXpnaIg5bCG5YW25Zyo57yT5a2Y6K6+572u5Lit5Yig6ZmkCiAgICAgICAgICAgICAgICAgIGNvbW1pdCgna2VlcEFsaXZlUmVtb3ZlJywgc3RhdGUub3BlbmVkW2luZGV4XS5uYW1lKTsgLy8g5pu05paw5pWw5o2uIOWIoOmZpOWFs+mXreeahOmhtemdogoKICAgICAgICAgICAgICAgICAgc3RhdGUub3BlbmVkLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgICAgICB9IC8vIOaMgeS5heWMlgoKCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdvcGVuZWQyZGInKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIGlmICghaXNDdXJyZW50KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uZXdQYWdlID0gbmV3UGFnZSwgX25ld1BhZ2UkbmFtZSA9IF9uZXdQYWdlLm5hbWUsIG5hbWUgPSBfbmV3UGFnZSRuYW1lID09PSB2b2lkIDAgPyAnaW5kZXgnIDogX25ld1BhZ2UkbmFtZSwgX25ld1BhZ2UkcGFyYW1zID0gX25ld1BhZ2UucGFyYW1zLCBwYXJhbXMgPSBfbmV3UGFnZSRwYXJhbXMgPT09IHZvaWQgMCA/IHt9IDogX25ld1BhZ2UkcGFyYW1zLCBfbmV3UGFnZSRxdWVyeSA9IF9uZXdQYWdlLnF1ZXJ5LCBxdWVyeSA9IF9uZXdQYWdlJHF1ZXJ5ID09PSB2b2lkIDAgPyB7fSA6IF9uZXdQYWdlJHF1ZXJ5OwogICAgICAgICAgICAgICAgcm91dGVyT2JqID0gewogICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcywKICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZXIucHVzaChyb3V0ZXJPYmopOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBjbGFzcyBvcGVuZWQNCiAgICAgKiBAZGVzY3JpcHRpb24g5YWz6Zet5b2T5YmN5qCH562+5bem6L6555qE5qCH562+DQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCB7IHBhZ2VTZWxlY3Q6IOW9k+WJjemAieS4reeahHRhZ05hbWUgfQ0KICAgICAqLwogICAgY2xvc2VMZWZ0OiBmdW5jdGlvbiBjbG9zZUxlZnQoX3JlZjE0KSB7CiAgICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIF9yZWYxNSwgcGFnZVNlbGVjdCwgcGFnZUFpbSwgY3VycmVudEluZGV4LCBpOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMTQuc3RhdGUsIGNvbW1pdCA9IF9yZWYxNC5jb21taXQsIGRpc3BhdGNoID0gX3JlZjE0LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgX3JlZjE1ID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiB7fSwgcGFnZVNlbGVjdCA9IF9yZWYxNS5wYWdlU2VsZWN0OwogICAgICAgICAgICAgICAgcGFnZUFpbSA9IHBhZ2VTZWxlY3QgfHwgc3RhdGUuY3VycmVudDsKICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IDA7CiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuZWQuZm9yRWFjaChmdW5jdGlvbiAocGFnZSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgaWYgKHBhZ2UuZnVsbFBhdGggPT09IHBhZ2VBaW0pIGN1cnJlbnRJbmRleCA9IGluZGV4OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKCEoY3VycmVudEluZGV4ID4gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaSA9IHN0YXRlLm9wZW5lZC5sZW5ndGggLSAxOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBpZiAoIShpID49IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKHN0YXRlLm9wZW5lZFtpXS5uYW1lID09PSAnaW5kZXgnIHx8IGkgPj0gY3VycmVudEluZGV4KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgiY29udGludWUiLCAxMik7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBjb21taXQoJ2tlZXBBbGl2ZVJlbW92ZScsIHN0YXRlLm9wZW5lZFtpXS5uYW1lKTsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5zcGxpY2UoaSwgMSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ29wZW5lZDJkYicpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgLy8g6K6+572u5b2T5YmN55qE6aG16Z2iCiAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50ID0gcGFnZUFpbTsKCiAgICAgICAgICAgICAgICBpZiAoIShyb3V0ZXIuYXBwLiRyb3V0ZS5mdWxsUGF0aCAhPT0gcGFnZUFpbSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZXIucHVzaChwYWdlQWltKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAY2xhc3Mgb3BlbmVkDQogICAgICogQGRlc2NyaXB0aW9uIOWFs+mXreW9k+WJjeagh+etvuWPs+i+ueeahOagh+etvg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0DQogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgeyBwYWdlU2VsZWN0OiDlvZPliY3pgInkuK3nmoR0YWdOYW1lIH0NCiAgICAgKi8KICAgIGNsb3NlUmlnaHQ6IGZ1bmN0aW9uIGNsb3NlUmlnaHQoX3JlZjE2KSB7CiAgICAgIHZhciBfYXJndW1lbnRzMiA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGRpc3BhdGNoLCBfcmVmMTcsIHBhZ2VTZWxlY3QsIHBhZ2VBaW0sIGN1cnJlbnRJbmRleCwgaTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjE2LnN0YXRlLCBjb21taXQgPSBfcmVmMTYuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYxNi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9yZWYxNyA9IF9hcmd1bWVudHMyLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50czJbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHMyWzFdIDoge30sIHBhZ2VTZWxlY3QgPSBfcmVmMTcucGFnZVNlbGVjdDsKICAgICAgICAgICAgICAgIHBhZ2VBaW0gPSBwYWdlU2VsZWN0IHx8IHN0YXRlLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggPSAwOwogICAgICAgICAgICAgICAgc3RhdGUub3BlbmVkLmZvckVhY2goZnVuY3Rpb24gKHBhZ2UsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgIGlmIChwYWdlLmZ1bGxQYXRoID09PSBwYWdlQWltKSBjdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgICAgICAgICAgIH0pOyAvLyDliKDpmaTmiZPlvIDnmoTpobXpnaIg5bm25Zyo57yT5a2Y6K6+572u5Lit5Yig6ZmkCgogICAgICAgICAgICAgICAgaSA9IHN0YXRlLm9wZW5lZC5sZW5ndGggLSAxOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBpZiAoIShpID49IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKHN0YXRlLm9wZW5lZFtpXS5uYW1lID09PSAnaW5kZXgnIHx8IGN1cnJlbnRJbmRleCA+PSBpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJjb250aW51ZSIsIDExKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgY29tbWl0KCdrZWVwQWxpdmVSZW1vdmUnLCBzdGF0ZS5vcGVuZWRbaV0ubmFtZSk7CiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuZWQuc3BsaWNlKGksIDEpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdvcGVuZWQyZGInKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIC8vIOiuvue9ruW9k+WJjeeahOmhtemdogogICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudCA9IHBhZ2VBaW07CgogICAgICAgICAgICAgICAgaWYgKCEocm91dGVyLmFwcC4kcm91dGUuZnVsbFBhdGggIT09IHBhZ2VBaW0pKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLnB1c2gocGFnZUFpbSk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGNsYXNzIG9wZW5lZA0KICAgICAqIEBkZXNjcmlwdGlvbiDlhbPpl63lvZPliY3mv4DmtLvkuYvlpJbnmoQgdGFnDQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCB7IHBhZ2VTZWxlY3Q6IOW9k+WJjemAieS4reeahHRhZ05hbWUgfQ0KICAgICAqLwogICAgY2xvc2VPdGhlcjogZnVuY3Rpb24gY2xvc2VPdGhlcihfcmVmMTgpIHsKICAgICAgdmFyIF9hcmd1bWVudHMzID0gYXJndW1lbnRzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGRpc3BhdGNoLCBfcmVmMTksIHBhZ2VTZWxlY3QsIHBhZ2VBaW0sIGN1cnJlbnRJbmRleCwgaTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYxOC5zdGF0ZSwgY29tbWl0ID0gX3JlZjE4LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMTguZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfcmVmMTkgPSBfYXJndW1lbnRzMy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHMzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzM1sxXSA6IHt9LCBwYWdlU2VsZWN0ID0gX3JlZjE5LnBhZ2VTZWxlY3Q7CiAgICAgICAgICAgICAgICBwYWdlQWltID0gcGFnZVNlbGVjdCB8fCBzdGF0ZS5jdXJyZW50OwogICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID0gMDsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5mb3JFYWNoKGZ1bmN0aW9uIChwYWdlLCBpbmRleCkgewogICAgICAgICAgICAgICAgICBpZiAocGFnZS5mdWxsUGF0aCA9PT0gcGFnZUFpbSkgY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICAgICAgICAgICAgICB9KTsgLy8g5Yig6Zmk5omT5byA55qE6aG16Z2i5pWw5o2uIOW5tuabtOaWsOe8k+WtmOiuvue9rgoKICAgICAgICAgICAgICAgIGkgPSBzdGF0ZS5vcGVuZWQubGVuZ3RoIC0gMTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgaWYgKCEoaSA+PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUub3BlbmVkW2ldLm5hbWUgPT09ICdpbmRleCcgfHwgY3VycmVudEluZGV4ID09PSBpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoImNvbnRpbnVlIiwgMTEpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBjb21taXQoJ2tlZXBBbGl2ZVJlbW92ZScsIHN0YXRlLm9wZW5lZFtpXS5uYW1lKTsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5zcGxpY2UoaSwgMSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnb3BlbmVkMmRiJyk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAvLyDorr7nva7mlrDnmoTpobXpnaIKICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnQgPSBwYWdlQWltOwoKICAgICAgICAgICAgICAgIGlmICghKHJvdXRlci5hcHAuJHJvdXRlLmZ1bGxQYXRoICE9PSBwYWdlQWltKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLnB1c2gocGFnZUFpbSk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAY2xhc3Mgb3BlbmVkDQogICAgICogQGRlc2NyaXB0aW9uIOWFs+mXreaJgOaciSB0YWcNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dA0KICAgICAqLwogICAgY2xvc2VBbGw6IGZ1bmN0aW9uIGNsb3NlQWxsKF9yZWYyMCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGRpc3BhdGNoLCBpOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMjAuc3RhdGUsIGNvbW1pdCA9IF9yZWYyMC5jb21taXQsIGRpc3BhdGNoID0gX3JlZjIwLmRpc3BhdGNoOwogICAgICAgICAgICAgICAgaSA9IHN0YXRlLm9wZW5lZC5sZW5ndGggLSAxOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpZiAoIShpID49IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShzdGF0ZS5vcGVuZWRbaV0ubmFtZSA9PT0gJ2luZGV4JykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJjb250aW51ZSIsIDcpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjb21taXQoJ2tlZXBBbGl2ZVJlbW92ZScsIHN0YXRlLm9wZW5lZFtpXS5uYW1lKTsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5zcGxpY2UoaSwgMSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdvcGVuZWQyZGInKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGlmICghKHJvdXRlci5hcHAuJHJvdXRlLm5hbWUgIT09ICdpbmRleCcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICdpbmRleCcKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgLyoqDQogICAgICogQGNsYXNzIGtlZXBBbGl2ZQ0KICAgICAqIEBkZXNjcmlwdGlvbiDku47lt7Lnu4/miZPlvIDnmoTpobXpnaLorrDlvZXkuK3mm7TmlrDpnIDopoHnvJPlrZjnmoTpobXpnaLorrDlvZUNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUNCiAgICAgKi8KICAgIGtlZXBBbGl2ZVJlZnJlc2g6IGZ1bmN0aW9uIGtlZXBBbGl2ZVJlZnJlc2goc3RhdGUpIHsKICAgICAgc3RhdGUua2VlcEFsaXZlID0gc3RhdGUub3BlbmVkLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpc0tlZXBBbGl2ZShpdGVtKTsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUubmFtZTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDliKDpmaTkuIDkuKrpobXpnaLnmoTnvJPlrZjorr7nva4NCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUNCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBuYW1lDQogICAgICovCiAgICBrZWVwQWxpdmVSZW1vdmU6IGZ1bmN0aW9uIGtlZXBBbGl2ZVJlbW92ZShzdGF0ZSwgbmFtZSkgewogICAgICB2YXIgbGlzdCA9IGNsb25lRGVlcChzdGF0ZS5rZWVwQWxpdmUpOwogICAgICB2YXIgaW5kZXggPSBsaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSBuYW1lOwogICAgICB9KTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICBsaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgc3RhdGUua2VlcEFsaXZlID0gbGlzdDsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb24g5aKe5Yqg5LiA5Liq6aG16Z2i55qE57yT5a2Y6K6+572uDQogICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlIHN0YXRlDQogICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbmFtZQ0KICAgICAqLwogICAga2VlcEFsaXZlUHVzaDogZnVuY3Rpb24ga2VlcEFsaXZlUHVzaChzdGF0ZSwgbmFtZSkgewogICAgICB2YXIga2VlcCA9IGNsb25lRGVlcChzdGF0ZS5rZWVwQWxpdmUpOwogICAgICBrZWVwLnB1c2gobmFtZSk7CiAgICAgIHN0YXRlLmtlZXBBbGl2ZSA9IHVuaXEoa2VlcCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDmuIXnqbrpobXpnaLnvJPlrZjorr7nva4NCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUNCiAgICAgKi8KICAgIGtlZXBBbGl2ZUNsZWFuOiBmdW5jdGlvbiBrZWVwQWxpdmVDbGVhbihzdGF0ZSkgewogICAgICBzdGF0ZS5rZWVwQWxpdmUgPSBbXTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGNsYXNzIGN1cnJlbnQNCiAgICAgKiBAZGVzY3JpcHRpb24g6K6+572u5b2T5YmN5r+A5rS755qE6aG16Z2iIGZ1bGxQYXRoDQogICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlIHN0YXRlDQogICAgICogQHBhcmFtIHtTdHJpbmd9IGZ1bGxQYXRoIG5ldyBmdWxsUGF0aA0KICAgICAqLwogICAgY3VycmVudFNldDogZnVuY3Rpb24gY3VycmVudFNldChzdGF0ZSwgZnVsbFBhdGgpIHsKICAgICAgc3RhdGUuY3VycmVudCA9IGZ1bGxQYXRoOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAY2xhc3MgcG9vbA0KICAgICAqIEBkZXNjcmlwdGlvbiDkv53lrZggcG9vbCAo5YCZ6YCJ5rGgKQ0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBzdGF0ZQ0KICAgICAqIEBwYXJhbSB7QXJyYXl9IHJvdXRlcyByb3V0ZXMNCiAgICAgKi8KICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoc3RhdGUsIHJvdXRlcykgewogICAgICB2YXIgcG9vbCA9IFtdOwoKICAgICAgdmFyIHB1c2ggPSBmdW5jdGlvbiBwdXNoKHJvdXRlcykgewogICAgICAgIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgICAgaWYgKHJvdXRlLmNoaWxkcmVuICYmIHJvdXRlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcHVzaChyb3V0ZS5jaGlsZHJlbik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIXJvdXRlLmhpZGRlbikgewogICAgICAgICAgICAgIHZhciBtZXRhID0gcm91dGUubWV0YSwKICAgICAgICAgICAgICAgICAgbmFtZSA9IHJvdXRlLm5hbWUsCiAgICAgICAgICAgICAgICAgIHBhdGggPSByb3V0ZS5wYXRoOwogICAgICAgICAgICAgIHBvb2wucHVzaCh7CiAgICAgICAgICAgICAgICBtZXRhOiBtZXRhLAogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgcHVzaChyb3V0ZXMpOwogICAgICBzdGF0ZS5wb29sID0gcG9vbDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:/Projekte/vue-admin/d2-admin-start-kit/src/store/modules/d2admin/modules/page.js"],"names":["cloneDeep","uniq","get","router","setting","isKeepAlive","data","namespaced","state","pool","opened","openedLoaded","current","keepAlive","actions","isLoaded","Promise","resolve","timer","setInterval","clearInterval","openedLoad","commit","dispatch","dbName","path","defaultValue","page","user","root","value","valid","map","fullPath","push","find","item","name","Object","assign","filter","index","opened2db","openedUpdate","params","query","splice","openedSort","oldIndex","newIndex","add","tag","newTag","open","meta","pageOpendIndex","pageOpend","same","t","close","tagName","newPage","isCurrent","len","length","i","findIndex","routerObj","closeLeft","pageSelect","pageAim","currentIndex","forEach","app","$route","closeRight","closeOther","closeAll","mutations","keepAliveRefresh","e","keepAliveRemove","list","keepAlivePush","keep","keepAliveClean","currentSet","init","routes","route","children","hidden"],"mappings":"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","sourcesContent":["import { cloneDeep, uniq, get } from 'lodash'\r\nimport router from '@/router'\r\nimport setting from '@/setting.js'\r\n\r\n// 判定是否需要缓存\r\nconst isKeepAlive = data => get(data, 'meta.cache', false)\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    // 可以在多页 tab 模式下显示的页面\r\n    pool: [],\r\n    // 当前显示的多页面列表\r\n    opened: get(setting, 'page.opened', []),\r\n    // 已经加载多标签页数据 https://github.com/d2-projects/d2-admin/issues/201\r\n    openedLoaded: false,\r\n    // 当前页面\r\n    current: '',\r\n    // 需要缓存的页面 name\r\n    keepAlive: []\r\n  },\r\n  actions: {\r\n    /**\r\n     * @description 确认已经加载多标签页数据 https://github.com/d2-projects/d2-admin/issues/201\r\n     * @param {Object} context\r\n     */\r\n    isLoaded ({ state }) {\r\n      if (state.openedLoaded) return Promise.resolve()\r\n      return new Promise(resolve => {\r\n        const timer = setInterval(() => {\r\n          if (state.openedLoaded) resolve(clearInterval(timer))\r\n        }, 10)\r\n      })\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 从持久化数据载入标签页列表\r\n     * @param {Object} context\r\n     */\r\n    async openedLoad ({ state, commit, dispatch }) {\r\n      // store 赋值\r\n      const value = await dispatch('d2admin/db/get', {\r\n        dbName: 'sys',\r\n        path: 'page.opened',\r\n        defaultValue: setting.page.opened,\r\n        user: true\r\n      }, { root: true })\r\n      // 在处理函数中进行数据优化 过滤掉现在已经失效的页签或者已经改变了信息的页签\r\n      // 以 fullPath 字段为准\r\n      // 如果页面过多的话可能需要优化算法\r\n      // valid 有效列表 1, 1, 0, 1 => 有效, 有效, 失效, 有效\r\n      const valid = []\r\n      // 处理数据\r\n      state.opened = value\r\n        .map(opened => {\r\n          // 忽略首页\r\n          if (opened.fullPath === '/index') {\r\n            valid.push(1)\r\n            return opened\r\n          }\r\n          // 尝试在所有的支持多标签页的页面里找到 name 匹配的页面\r\n          const find = state.pool.find(item => item.name === opened.name)\r\n          // 记录有效或无效信息\r\n          valid.push(find ? 1 : 0)\r\n          // 返回合并后的数据 新的覆盖旧的\r\n          // 新的数据中一般不会携带 params 和 query, 所以旧的参数会留存\r\n          return Object.assign({}, opened, find)\r\n        })\r\n        .filter((opened, index) => valid[index] === 1)\r\n      // 标记已经加载多标签页数据 https://github.com/d2-projects/d2-admin/issues/201\r\n      state.openedLoaded = true\r\n      // 根据 opened 数据生成缓存设置\r\n      commit('keepAliveRefresh')\r\n    },\r\n    /**\r\n     * 将 opened 属性赋值并持久化 在这之前请先确保已经更新了 state.opened\r\n     * @param {Object} context\r\n     */\r\n    async opened2db ({ state, dispatch }) {\r\n      // 设置数据\r\n      dispatch('d2admin/db/set', {\r\n        dbName: 'sys',\r\n        path: 'page.opened',\r\n        value: state.opened,\r\n        user: true\r\n      }, { root: true })\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 更新页面列表上的某一项\r\n     * @param {Object} context\r\n     * @param {Object} payload { index, params, query, fullPath } 路由信息\r\n     */\r\n    async openedUpdate ({ state, commit, dispatch }, { index, params, query, fullPath }) {\r\n      // 更新页面列表某一项\r\n      const page = state.opened[index]\r\n      page.params = params || page.params\r\n      page.query = query || page.query\r\n      page.fullPath = fullPath || page.fullPath\r\n      state.opened.splice(index, 1, page)\r\n      // 持久化\r\n      await dispatch('opened2db')\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 重排页面列表上的某一项\r\n     * @param {Object} context\r\n     * @param {Object} payload { oldIndex, newIndex } 位置信息\r\n     */\r\n    async openedSort ({ state, commit, dispatch }, { oldIndex, newIndex }) {\r\n      // 重排页面列表某一项\r\n      const page = state.opened[oldIndex]\r\n      state.opened.splice(oldIndex, 1)\r\n      state.opened.splice(newIndex, 0, page)\r\n      // 持久化\r\n      await dispatch('opened2db')\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 新增一个 tag (打开一个页面)\r\n     * @param {Object} context\r\n     * @param {Object} payload new tag info\r\n     */\r\n    async add ({ state, commit, dispatch }, { tag, params, query, fullPath }) {\r\n      // 设置新的 tag 在新打开一个以前没打开过的页面时使用\r\n      const newTag = tag\r\n      newTag.params = params || newTag.params\r\n      newTag.query = query || newTag.query\r\n      newTag.fullPath = fullPath || newTag.fullPath\r\n      // 添加进当前显示的页面数组\r\n      state.opened.push(newTag)\r\n      // 如果这个页面需要缓存 将其添加到缓存设置\r\n      if (isKeepAlive(newTag)) commit('keepAlivePush', tag.name)\r\n      // 持久化\r\n      await dispatch('opened2db')\r\n    },\r\n    /**\r\n     * @class current\r\n     * @description 打开一个新的页面\r\n     * @param {Object} context\r\n     * @param {Object} payload 从路由钩子的 to 对象上获取 { name, params, query, fullPath, meta } 路由信息\r\n     */\r\n    async open ({ state, commit, dispatch }, { name, params, query, fullPath, meta }) {\r\n      // 已经打开的页面\r\n      const opened = state.opened\r\n      // 判断此页面是否已经打开 并且记录位置\r\n      let pageOpendIndex = 0\r\n      const pageOpend = opened.find((page, index) => {\r\n        const same = page.fullPath === fullPath\r\n        pageOpendIndex = same ? index : pageOpendIndex\r\n        return same\r\n      })\r\n      if (pageOpend) {\r\n        // 页面以前打开过\r\n        await dispatch('openedUpdate', {\r\n          index: pageOpendIndex,\r\n          params,\r\n          query,\r\n          fullPath\r\n        })\r\n      } else {\r\n        // 页面以前没有打开过\r\n        const page = state.pool.find(t => t.name === name)\r\n        // 如果这里没有找到 page 代表这个路由虽然在框架内 但是不参与标签页显示\r\n        if (page) {\r\n          await dispatch('add', {\r\n            tag: Object.assign({}, page),\r\n            params,\r\n            query,\r\n            fullPath\r\n          })\r\n        }\r\n      }\r\n      // 如果这个页面需要缓存 将其添加到缓存设置\r\n      if (isKeepAlive({ meta })) commit('keepAlivePush', name)\r\n      // 设置当前的页面\r\n      commit('currentSet', fullPath)\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 关闭一个 tag (关闭一个页面)\r\n     * @param {Object} context\r\n     * @param {Object} payload { tagName: 要关闭的标签名字 }\r\n     */\r\n    async close ({ state, commit, dispatch }, { tagName }) {\r\n      // 预定下个新页面\r\n      let newPage = {}\r\n      const isCurrent = state.current === tagName\r\n      // 如果关闭的页面就是当前显示的页面\r\n      if (isCurrent) {\r\n        // 去找一个新的页面\r\n        const len = state.opened.length\r\n        for (let i = 0; i < len; i++) {\r\n          if (state.opened[i].fullPath === tagName) {\r\n            newPage = i < len - 1 ? state.opened[i + 1] : state.opened[i - 1]\r\n            break\r\n          }\r\n        }\r\n      }\r\n      // 找到这个页面在已经打开的数据里是第几个\r\n      const index = state.opened.findIndex(page => page.fullPath === tagName)\r\n      if (index >= 0) {\r\n        // 如果这个页面是缓存的页面 将其在缓存设置中删除\r\n        commit('keepAliveRemove', state.opened[index].name)\r\n        // 更新数据 删除关闭的页面\r\n        state.opened.splice(index, 1)\r\n      }\r\n      // 持久化\r\n      await dispatch('opened2db')\r\n      // 决定最后停留的页面\r\n      if (isCurrent) {\r\n        const { name = 'index', params = {}, query = {} } = newPage\r\n        const routerObj = { name, params, query }\r\n        await router.push(routerObj)\r\n      }\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 关闭当前标签左边的标签\r\n     * @param {Object} context\r\n     * @param {Object} payload { pageSelect: 当前选中的tagName }\r\n     */\r\n    async closeLeft ({ state, commit, dispatch }, { pageSelect } = {}) {\r\n      const pageAim = pageSelect || state.current\r\n      let currentIndex = 0\r\n      state.opened.forEach((page, index) => {\r\n        if (page.fullPath === pageAim) currentIndex = index\r\n      })\r\n      if (currentIndex > 0) {\r\n        // 删除打开的页面 并在缓存设置中删除\r\n        for (let i = state.opened.length - 1; i >= 0; i--) {\r\n          if (state.opened[i].name === 'index' || i >= currentIndex) {\r\n            continue\r\n          }\r\n\r\n          commit('keepAliveRemove', state.opened[i].name)\r\n          state.opened.splice(i, 1)\r\n        }\r\n      }\r\n      // 持久化\r\n      await dispatch('opened2db')\r\n      // 设置当前的页面\r\n      state.current = pageAim\r\n      if (router.app.$route.fullPath !== pageAim) await router.push(pageAim)\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 关闭当前标签右边的标签\r\n     * @param {Object} context\r\n     * @param {Object} payload { pageSelect: 当前选中的tagName }\r\n     */\r\n    async closeRight ({ state, commit, dispatch }, { pageSelect } = {}) {\r\n      const pageAim = pageSelect || state.current\r\n      let currentIndex = 0\r\n      state.opened.forEach((page, index) => {\r\n        if (page.fullPath === pageAim) currentIndex = index\r\n      })\r\n      // 删除打开的页面 并在缓存设置中删除\r\n      for (let i = state.opened.length - 1; i >= 0; i--) {\r\n        if (state.opened[i].name === 'index' || currentIndex >= i) {\r\n          continue\r\n        }\r\n\r\n        commit('keepAliveRemove', state.opened[i].name)\r\n        state.opened.splice(i, 1)\r\n      }\r\n      // 持久化\r\n      await dispatch('opened2db')\r\n      // 设置当前的页面\r\n      state.current = pageAim\r\n      if (router.app.$route.fullPath !== pageAim) await router.push(pageAim)\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 关闭当前激活之外的 tag\r\n     * @param {Object} context\r\n     * @param {Object} payload { pageSelect: 当前选中的tagName }\r\n     */\r\n    async closeOther ({ state, commit, dispatch }, { pageSelect } = {}) {\r\n      const pageAim = pageSelect || state.current\r\n      let currentIndex = 0\r\n      state.opened.forEach((page, index) => {\r\n        if (page.fullPath === pageAim) currentIndex = index\r\n      })\r\n      // 删除打开的页面数据 并更新缓存设置\r\n      for (let i = state.opened.length - 1; i >= 0; i--) {\r\n        if (state.opened[i].name === 'index' || currentIndex === i) {\r\n          continue\r\n        }\r\n\r\n        commit('keepAliveRemove', state.opened[i].name)\r\n        state.opened.splice(i, 1)\r\n      }\r\n      // 持久化\r\n      await dispatch('opened2db')\r\n      // 设置新的页面\r\n      state.current = pageAim\r\n      if (router.app.$route.fullPath !== pageAim) await router.push(pageAim)\r\n    },\r\n    /**\r\n     * @class opened\r\n     * @description 关闭所有 tag\r\n     * @param {Object} context\r\n     */\r\n    async closeAll ({ state, commit, dispatch }) {\r\n      // 删除打开的页面 并在缓存设置中删除\r\n      for (let i = state.opened.length - 1; i >= 0; i--) {\r\n        if (state.opened[i].name === 'index') {\r\n          continue\r\n        }\r\n\r\n        commit('keepAliveRemove', state.opened[i].name)\r\n        state.opened.splice(i, 1)\r\n      }\r\n      // 持久化\r\n      await dispatch('opened2db')\r\n      // 关闭所有的标签页后需要判断一次现在是不是在首页\r\n      if (router.app.$route.name !== 'index') {\r\n        await router.push({ name: 'index' })\r\n      }\r\n    }\r\n  },\r\n  mutations: {\r\n    /**\r\n     * @class keepAlive\r\n     * @description 从已经打开的页面记录中更新需要缓存的页面记录\r\n     * @param {Object} state state\r\n     */\r\n    keepAliveRefresh (state) {\r\n      state.keepAlive = state.opened.filter(item => isKeepAlive(item)).map(e => e.name)\r\n    },\r\n    /**\r\n     * @description 删除一个页面的缓存设置\r\n     * @param {Object} state state\r\n     * @param {String} name name\r\n     */\r\n    keepAliveRemove (state, name) {\r\n      const list = cloneDeep(state.keepAlive)\r\n      const index = list.findIndex(item => item === name)\r\n      if (index !== -1) {\r\n        list.splice(index, 1)\r\n        state.keepAlive = list\r\n      }\r\n    },\r\n    /**\r\n     * @description 增加一个页面的缓存设置\r\n     * @param {Object} state state\r\n     * @param {String} name name\r\n     */\r\n    keepAlivePush (state, name) {\r\n      const keep = cloneDeep(state.keepAlive)\r\n      keep.push(name)\r\n      state.keepAlive = uniq(keep)\r\n    },\r\n    /**\r\n     * @description 清空页面缓存设置\r\n     * @param {Object} state state\r\n     */\r\n    keepAliveClean (state) {\r\n      state.keepAlive = []\r\n    },\r\n    /**\r\n     * @class current\r\n     * @description 设置当前激活的页面 fullPath\r\n     * @param {Object} state state\r\n     * @param {String} fullPath new fullPath\r\n     */\r\n    currentSet (state, fullPath) {\r\n      state.current = fullPath\r\n    },\r\n    /**\r\n     * @class pool\r\n     * @description 保存 pool (候选池)\r\n     * @param {Object} state state\r\n     * @param {Array} routes routes\r\n     */\r\n    init (state, routes) {\r\n      const pool = []\r\n      const push = function (routes) {\r\n        routes.forEach(route => {\r\n          if (route.children && route.children.length > 0) {\r\n            push(route.children)\r\n          } else {\r\n            if (!route.hidden) {\r\n              const { meta, name, path } = route\r\n              pool.push({ meta, name, path })\r\n            }\r\n          }\r\n        })\r\n      }\r\n      push(routes)\r\n      state.pool = pool\r\n    }\r\n  }\r\n}\r\n"]}]}