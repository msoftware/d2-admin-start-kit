{"remainingRequest":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\color.js","dependencies":[{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\color.js","mtime":1593434353519},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovUHJvamVrdGUvdnVlLWFkbWluL2QyLWFkbWluLXN0YXJ0LWtpdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCBjbGllbnQgZnJvbSAnd2VicGFjay10aGVtZS1jb2xvci1yZXBsYWNlci9jbGllbnQnOwppbXBvcnQgZm9yRWxlbWVudFVJIGZyb20gJ3dlYnBhY2stdGhlbWUtY29sb3ItcmVwbGFjZXIvZm9yRWxlbWVudFVJJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIC8vIOminOiJsgogICAgdmFsdWU6IHByb2Nlc3MuZW52LlZVRV9BUFBfRUxFTUVOVF9DT0xPUgogIH0sCiAgYWN0aW9uczogewogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uIOiuvue9ruminOiJsg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0DQogICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbG9yIOWwuuWvuA0KICAgICAqLwogICAgc2V0OiBmdW5jdGlvbiBzZXQoX3JlZiwgY29sb3IpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGRpc3BhdGNoLCBjb21taXQsIG9sZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGUsIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaCwgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgICAvLyDorrDlvZXkuIrkuKrlgLwKICAgICAgICAgICAgICAgIG9sZCA9IHN0YXRlLnZhbHVlOyAvLyBzdG9yZSDotYvlgLwKCiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZSA9IGNvbG9yIHx8IHByb2Nlc3MuZW52LlZVRV9BUFBfRUxFTUVOVF9DT0xPUjsgLy8g5oyB5LmF5YyWCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2QyYWRtaW4vZGIvc2V0JywgewogICAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgICBwYXRoOiAnY29sb3IudmFsdWUnLAogICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdGUudmFsdWUsCiAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIC8vIOW6lOeUqAogICAgICAgICAgICAgICAgY29tbWl0KCdhcHBseScsIHsKICAgICAgICAgICAgICAgICAgb2xkQ29sb3I6IG9sZCwKICAgICAgICAgICAgICAgICAgbmV3Q29sb3I6IHN0YXRlLnZhbHVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb24g5LuO5oyB5LmF5YyW5pWw5o2u6K+75Y+W6aKc6Imy6K6+572uDQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQNCiAgICAgKi8KICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoX3JlZjIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBkaXNwYXRjaCwgY29tbWl0LCBvbGQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGUsIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2gsIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICAgIC8vIOiusOW9leS4iuS4quWAvAogICAgICAgICAgICAgICAgb2xkID0gc3RhdGUudmFsdWU7IC8vIHN0b3JlIOi1i+WAvAoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9nZXQnLCB7CiAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgIHBhdGg6ICdjb2xvci52YWx1ZScsCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogcHJvY2Vzcy5lbnYuVlVFX0FQUF9FTEVNRU5UX0NPTE9SLAogICAgICAgICAgICAgICAgICB1c2VyOiB0cnVlCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgLy8g5bqU55SoCiAgICAgICAgICAgICAgICBjb21taXQoJ2FwcGx5JywgewogICAgICAgICAgICAgICAgICBvbGRDb2xvcjogb2xkLAogICAgICAgICAgICAgICAgICBuZXdDb2xvcjogc3RhdGUudmFsdWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uIOWwhiB2dWV4IOS4reeahOS4u+mimOminOiJsuiuvue9ruW6lOeUqOWIsOezu+e7n+S4rQ0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0DQogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgb2xkQ29sb3Ige1N0cmluZ30g5pen55qE6aKc6ImyDQogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgbmV3Q29sb3Ige1N0cmluZ30g5paw6aKc6ImyDQogICAgICovCiAgICBhcHBseTogZnVuY3Rpb24gYXBwbHkoc3RhdGUsIF9yZWYzKSB7CiAgICAgIHZhciBvbGRDb2xvciA9IF9yZWYzLm9sZENvbG9yLAogICAgICAgICAgbmV3Q29sb3IgPSBfcmVmMy5uZXdDb2xvcjsKICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgb2xkQ29sb3JzOiBjbG9uZURlZXAoZm9yRWxlbWVudFVJLmdldEVsZW1lbnRVSVNlcmllcyhvbGRDb2xvcikpLAogICAgICAgIG5ld0NvbG9yczogY2xvbmVEZWVwKGZvckVsZW1lbnRVSS5nZXRFbGVtZW50VUlTZXJpZXMobmV3Q29sb3IpKQogICAgICB9OwogICAgICBjbGllbnQuY2hhbmdlci5jaGFuZ2VDb2xvcihvcHRpb25zKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:/Projekte/vue-admin/d2-admin-start-kit/src/store/modules/d2admin/modules/color.js"],"names":["cloneDeep","client","forElementUI","namespaced","state","value","process","env","VUE_APP_ELEMENT_COLOR","actions","set","color","dispatch","commit","old","dbName","path","user","root","oldColor","newColor","load","defaultValue","mutations","apply","options","oldColors","getElementUISeries","newColors","changer","changeColor"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,QAA1B;AACA,OAAOC,MAAP,MAAmB,qCAAnB;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACL;AACAC,IAAAA,KAAK,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAFd,GAFM;AAMbC,EAAAA,OAAO,EAAE;AACP;;;;;AAKMC,IAAAA,GANC,qBAMiCC,KANjC,EAMwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlCP,gBAAAA,KAAkC,QAAlCA,KAAkC,EAA3BQ,QAA2B,QAA3BA,QAA2B,EAAjBC,MAAiB,QAAjBA,MAAiB;AAC7C;AACMC,gBAAAA,GAFuC,GAEjCV,KAAK,CAACC,KAF2B,EAG7C;;AACAD,gBAAAA,KAAK,CAACC,KAAN,GAAcM,KAAK,IAAIL,OAAO,CAACC,GAAR,CAAYC,qBAAnC,CAJ6C,CAK7C;;AAL6C;AAAA,uBAMvCI,QAAQ,CAAC,gBAAD,EAAmB;AAC/BG,kBAAAA,MAAM,EAAE,KADuB;AAE/BC,kBAAAA,IAAI,EAAE,aAFyB;AAG/BX,kBAAAA,KAAK,EAAED,KAAK,CAACC,KAHkB;AAI/BY,kBAAAA,IAAI,EAAE;AAJyB,iBAAnB,EAKX;AAAEC,kBAAAA,IAAI,EAAE;AAAR,iBALW,CAN+B;;AAAA;AAY7C;AACAL,gBAAAA,MAAM,CAAC,OAAD,EAAU;AACdM,kBAAAA,QAAQ,EAAEL,GADI;AAEdM,kBAAAA,QAAQ,EAAEhB,KAAK,CAACC;AAFF,iBAAV,CAAN;;AAb6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiB9C,KAvBM;;AAwBP;;;;AAIMgB,IAAAA,IA5BC,uBA4BkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA3BjB,gBAAAA,KAA2B,SAA3BA,KAA2B,EAApBQ,QAAoB,SAApBA,QAAoB,EAAVC,MAAU,SAAVA,MAAU;AACvC;AACMC,gBAAAA,GAFiC,GAE3BV,KAAK,CAACC,KAFqB,EAGvC;;AAHuC;AAAA,uBAInBO,QAAQ,CAAC,gBAAD,EAAmB;AAC7CG,kBAAAA,MAAM,EAAE,KADqC;AAE7CC,kBAAAA,IAAI,EAAE,aAFuC;AAG7CM,kBAAAA,YAAY,EAAEhB,OAAO,CAACC,GAAR,CAAYC,qBAHmB;AAI7CS,kBAAAA,IAAI,EAAE;AAJuC,iBAAnB,EAKzB;AAAEC,kBAAAA,IAAI,EAAE;AAAR,iBALyB,CAJW;;AAAA;AAIvCd,gBAAAA,KAAK,CAACC,KAJiC;AAUvC;AACAQ,gBAAAA,MAAM,CAAC,OAAD,EAAU;AACdM,kBAAAA,QAAQ,EAAEL,GADI;AAEdM,kBAAAA,QAAQ,EAAEhB,KAAK,CAACC;AAFF,iBAAV,CAAN;;AAXuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAexC;AA3CM,GANI;AAmDbkB,EAAAA,SAAS,EAAE;AACT;;;;;;AAMAC,IAAAA,KAPS,iBAOFpB,KAPE,SAO6B;AAAA,UAAtBe,QAAsB,SAAtBA,QAAsB;AAAA,UAAZC,QAAY,SAAZA,QAAY;AACpC,UAAIK,OAAO,GAAG;AACZC,QAAAA,SAAS,EAAE1B,SAAS,CAACE,YAAY,CAACyB,kBAAb,CAAgCR,QAAhC,CAAD,CADR;AAEZS,QAAAA,SAAS,EAAE5B,SAAS,CAACE,YAAY,CAACyB,kBAAb,CAAgCP,QAAhC,CAAD;AAFR,OAAd;AAIAnB,MAAAA,MAAM,CAAC4B,OAAP,CAAeC,WAAf,CAA2BL,OAA3B;AACD;AAbQ;AAnDE,CAAf","sourcesContent":["import { cloneDeep } from 'lodash'\r\nimport client from 'webpack-theme-color-replacer/client'\r\nimport forElementUI from 'webpack-theme-color-replacer/forElementUI'\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    // 颜色\r\n    value: process.env.VUE_APP_ELEMENT_COLOR\r\n  },\r\n  actions: {\r\n    /**\r\n     * @description 设置颜色\r\n     * @param {Object} context\r\n     * @param {String} color 尺寸\r\n     */\r\n    async set ({ state, dispatch, commit }, color) {\r\n      // 记录上个值\r\n      const old = state.value\r\n      // store 赋值\r\n      state.value = color || process.env.VUE_APP_ELEMENT_COLOR\r\n      // 持久化\r\n      await dispatch('d2admin/db/set', {\r\n        dbName: 'sys',\r\n        path: 'color.value',\r\n        value: state.value,\r\n        user: true\r\n      }, { root: true })\r\n      // 应用\r\n      commit('apply', {\r\n        oldColor: old,\r\n        newColor: state.value\r\n      })\r\n    },\r\n    /**\r\n     * @description 从持久化数据读取颜色设置\r\n     * @param {Object} context\r\n     */\r\n    async load ({ state, dispatch, commit }) {\r\n      // 记录上个值\r\n      const old = state.value\r\n      // store 赋值\r\n      state.value = await dispatch('d2admin/db/get', {\r\n        dbName: 'sys',\r\n        path: 'color.value',\r\n        defaultValue: process.env.VUE_APP_ELEMENT_COLOR,\r\n        user: true\r\n      }, { root: true })\r\n      // 应用\r\n      commit('apply', {\r\n        oldColor: old,\r\n        newColor: state.value\r\n      })\r\n    }\r\n  },\r\n  mutations: {\r\n    /**\r\n     * @description 将 vuex 中的主题颜色设置应用到系统中\r\n     * @param {Object} context\r\n     * @param {Object} payload oldColor {String} 旧的颜色\r\n     * @param {Object} payload newColor {String} 新颜色\r\n     */\r\n    apply (state, { oldColor, newColor }) {\r\n      var options = {\r\n        oldColors: cloneDeep(forElementUI.getElementUISeries(oldColor)),\r\n        newColors: cloneDeep(forElementUI.getElementUISeries(newColor))\r\n      }\r\n      client.changer.changeColor(options)\r\n    }\r\n  }\r\n}\r\n"]}]}