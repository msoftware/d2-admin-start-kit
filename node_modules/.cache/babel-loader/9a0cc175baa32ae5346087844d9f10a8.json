{"remainingRequest":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\log.js","dependencies":[{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\src\\store\\modules\\d2admin\\modules\\log.js","mtime":1593434353520},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Projekte\\vue-admin\\d2-admin-start-kit\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovUHJvamVrdGUvdnVlLWFkbWluL2QyLWFkbWluLXN0YXJ0LWtpdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7CmltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB1dGlsIGZyb20gJ0AvbGlicy91dGlsLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIC8vIOmUmeivr+aXpeW/lwogICAgLy8gKyDml6Xlv5fmnaHnm67nmoTlsZ7mgKcKICAgIC8vICAgLSBtZXNzYWdlIOW/hemhuyDml6Xlv5fkv6Hmga8KICAgIC8vICAgLSB0eXBlIOmdnuW/hemhuyDnsbvlnosgc3VjY2VzcyB8IHdhcm5pbmcgfCBpbmZvKOm7mOiupCkgfCBkYW5nZXIKICAgIC8vICAgLSB0aW1lIOW/hemhuyDml6Xlv5forrDlvZXml7bpl7QKICAgIC8vICAgLSBtZXRhIOmdnuW/hemhuyDlhbblroPmkLrluKbkv6Hmga8KICAgIGxvZzogW10KICB9LAogIGdldHRlcnM6IHsKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDov5Tlm57njrDlrZggbG9nIChhbGwpIOeahOadoeaVsA0KICAgICAqIEBwYXJhbSB7Kn0gc3RhdGUgdnVleCBzdGF0ZQ0KICAgICAqLwogICAgbGVuZ3RoOiBmdW5jdGlvbiBsZW5ndGgoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmxvZy5sZW5ndGg7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDov5Tlm57njrDlrZggbG9nIChlcnJvcikg55qE5p2h5pWwDQogICAgICogQHBhcmFtIHsqfSBzdGF0ZSB2dWV4IHN0YXRlDQogICAgICovCiAgICBsZW5ndGhFcnJvcjogZnVuY3Rpb24gbGVuZ3RoRXJyb3Ioc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmxvZy5maWx0ZXIoZnVuY3Rpb24gKGxvZykgewogICAgICAgIHJldHVybiBsb2cudHlwZSA9PT0gJ2Rhbmdlcic7CiAgICAgIH0pLmxlbmd0aDsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDmt7vliqDkuIDkuKrml6Xlv5cNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dA0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbSBtZXNzYWdlIHtTdHJpbmd9IOS/oeaBrw0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbSB0eXBlIHtTdHJpbmd9IOexu+Weiw0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIG1ldGEge09iamVjdH0g6ZmE5bim55qE5L+h5oGvDQogICAgICovCiAgICBwdXNoOiBmdW5jdGlvbiBwdXNoKF9yZWYsIF9yZWYyKSB7CiAgICAgIHZhciByb290U3RhdGUgPSBfcmVmLnJvb3RTdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICB2YXIgbWVzc2FnZSA9IF9yZWYyLm1lc3NhZ2UsCiAgICAgICAgICBfcmVmMiR0eXBlID0gX3JlZjIudHlwZSwKICAgICAgICAgIHR5cGUgPSBfcmVmMiR0eXBlID09PSB2b2lkIDAgPyAnaW5mbycgOiBfcmVmMiR0eXBlLAogICAgICAgICAgbWV0YSA9IF9yZWYyLm1ldGE7CiAgICAgIGNvbW1pdCgncHVzaCcsIHsKICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgdGltZTogZGF5anMoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKSwKICAgICAgICBtZXRhOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIC8vIOW9k+WJjeeUqOaIt+S/oeaBrwogICAgICAgICAgdXNlcjogcm9vdFN0YXRlLmQyYWRtaW4udXNlci5pbmZvLAogICAgICAgICAgLy8g5b2T5YmN55So5oi355qEIHV1aWQKICAgICAgICAgIHV1aWQ6IHV0aWwuY29va2llcy5nZXQoJ3V1aWQnKSwKICAgICAgICAgIC8vIOW9k+WJjeeahCB0b2tlbgogICAgICAgICAgdG9rZW46IHV0aWwuY29va2llcy5nZXQoJ3Rva2VuJyksCiAgICAgICAgICAvLyDlvZPliY3lnLDlnYAKICAgICAgICAgIHVybDogZ2V0KHdpbmRvdywgJ2xvY2F0aW9uLmhyZWYnLCAnJykKICAgICAgICB9LCBtZXRhKQogICAgICB9KTsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uIOa3u+WKoOaXpeW/lw0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBzdGF0ZQ0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsb2cgZGF0YQ0KICAgICAqLwogICAgcHVzaDogZnVuY3Rpb24gcHVzaChzdGF0ZSwgbG9nKSB7CiAgICAgIHN0YXRlLmxvZy5wdXNoKGxvZyk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbiDmuIXnqbrml6Xlv5cNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUNCiAgICAgKi8KICAgIGNsZWFuOiBmdW5jdGlvbiBjbGVhbihzdGF0ZSkgewogICAgICAvLyBzdG9yZSDotYvlgLwKICAgICAgc3RhdGUubG9nID0gW107CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Projekte/vue-admin/d2-admin-start-kit/src/store/modules/d2admin/modules/log.js"],"names":["dayjs","get","util","namespaced","state","log","getters","length","lengthError","filter","type","actions","push","rootState","commit","message","meta","time","format","user","d2admin","info","uuid","cookies","token","url","window","mutations","clean"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,GAAG,EAAE;AAPA,GAFM;AAWbC,EAAAA,OAAO,EAAE;AACP;;;;AAIAC,IAAAA,MALO,kBAKCH,KALD,EAKQ;AACb,aAAOA,KAAK,CAACC,GAAN,CAAUE,MAAjB;AACD,KAPM;;AAQP;;;;AAIAC,IAAAA,WAZO,uBAYMJ,KAZN,EAYa;AAClB,aAAOA,KAAK,CAACC,GAAN,CAAUI,MAAV,CAAiB,UAAAJ,GAAG;AAAA,eAAIA,GAAG,CAACK,IAAJ,KAAa,QAAjB;AAAA,OAApB,EAA+CH,MAAtD;AACD;AAdM,GAXI;AA2BbI,EAAAA,OAAO,EAAE;AACP;;;;;;;AAOAC,IAAAA,IARO,6BAQwD;AAAA,UAAvDC,SAAuD,QAAvDA,SAAuD;AAAA,UAA5CC,MAA4C,QAA5CA,MAA4C;AAAA,UAAhCC,OAAgC,SAAhCA,OAAgC;AAAA,6BAAvBL,IAAuB;AAAA,UAAvBA,IAAuB,2BAAhB,MAAgB;AAAA,UAARM,IAAQ,SAARA,IAAQ;AAC7DF,MAAAA,MAAM,CAAC,MAAD,EAAS;AACbC,QAAAA,OAAO,EAAPA,OADa;AAEbL,QAAAA,IAAI,EAAJA,IAFa;AAGbO,QAAAA,IAAI,EAAEjB,KAAK,GAAGkB,MAAR,CAAe,qBAAf,CAHO;AAIbF,QAAAA,IAAI;AACF;AACAG,UAAAA,IAAI,EAAEN,SAAS,CAACO,OAAV,CAAkBD,IAAlB,CAAuBE,IAF3B;AAGF;AACAC,UAAAA,IAAI,EAAEpB,IAAI,CAACqB,OAAL,CAAatB,GAAb,CAAiB,MAAjB,CAJJ;AAKF;AACAuB,UAAAA,KAAK,EAAEtB,IAAI,CAACqB,OAAL,CAAatB,GAAb,CAAiB,OAAjB,CANL;AAOF;AACAwB,UAAAA,GAAG,EAAExB,GAAG,CAACyB,MAAD,EAAS,eAAT,EAA0B,EAA1B;AARN,WAUCV,IAVD;AAJS,OAAT,CAAN;AAiBD;AA1BM,GA3BI;AAuDbW,EAAAA,SAAS,EAAE;AACT;;;;;AAKAf,IAAAA,IANS,gBAMHR,KANG,EAMIC,GANJ,EAMS;AAChBD,MAAAA,KAAK,CAACC,GAAN,CAAUO,IAAV,CAAeP,GAAf;AACD,KARQ;;AAST;;;;AAIAuB,IAAAA,KAbS,iBAaFxB,KAbE,EAaK;AACZ;AACAA,MAAAA,KAAK,CAACC,GAAN,GAAY,EAAZ;AACD;AAhBQ;AAvDE,CAAf","sourcesContent":["import dayjs from 'dayjs'\r\nimport { get } from 'lodash'\r\nimport util from '@/libs/util.js'\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    // 错误日志\r\n    // + 日志条目的属性\r\n    //   - message 必须 日志信息\r\n    //   - type 非必须 类型 success | warning | info(默认) | danger\r\n    //   - time 必须 日志记录时间\r\n    //   - meta 非必须 其它携带信息\r\n    log: []\r\n  },\r\n  getters: {\r\n    /**\r\n     * @description 返回现存 log (all) 的条数\r\n     * @param {*} state vuex state\r\n     */\r\n    length (state) {\r\n      return state.log.length\r\n    },\r\n    /**\r\n     * @description 返回现存 log (error) 的条数\r\n     * @param {*} state vuex state\r\n     */\r\n    lengthError (state) {\r\n      return state.log.filter(log => log.type === 'danger').length\r\n    }\r\n  },\r\n  actions: {\r\n    /**\r\n     * @description 添加一个日志\r\n     * @param {Object} context\r\n     * @param {String} param message {String} 信息\r\n     * @param {String} param type {String} 类型\r\n     * @param {Object} payload meta {Object} 附带的信息\r\n     */\r\n    push ({ rootState, commit }, { message, type = 'info', meta }) {\r\n      commit('push', {\r\n        message,\r\n        type,\r\n        time: dayjs().format('YYYY-MM-DD HH:mm:ss'),\r\n        meta: {\r\n          // 当前用户信息\r\n          user: rootState.d2admin.user.info,\r\n          // 当前用户的 uuid\r\n          uuid: util.cookies.get('uuid'),\r\n          // 当前的 token\r\n          token: util.cookies.get('token'),\r\n          // 当前地址\r\n          url: get(window, 'location.href', ''),\r\n          // 用户设置\r\n          ...meta\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mutations: {\r\n    /**\r\n     * @description 添加日志\r\n     * @param {Object} state state\r\n     * @param {Object} log data\r\n     */\r\n    push (state, log) {\r\n      state.log.push(log)\r\n    },\r\n    /**\r\n     * @description 清空日志\r\n     * @param {Object} state state\r\n     */\r\n    clean (state) {\r\n      // store 赋值\r\n      state.log = []\r\n    }\r\n  }\r\n}\r\n"]}]}